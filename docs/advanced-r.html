<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Advanced R | _main.utf8.md</title>
  <meta name="description" content="" />
  <meta name="generator" content="bookdown 0.16 and GitBook 2.6.7" />

  <meta property="og:title" content="Advanced R | _main.utf8.md" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Advanced R | _main.utf8.md" />
  
  
  

<meta name="author" content="Chase Hickman" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="programming.html"/>
<link rel="next" href="import.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Chase Hickman</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i>Introduction</a><ul>
<li class="chapter" data-level="" data-path="licensing.html"><a href="licensing.html"><i class="fa fa-check"></i>Licensing</a></li>
<li class="chapter" data-level="" data-path="about-the-author.html"><a href="about-the-author.html"><i class="fa fa-check"></i>About the Author</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="programming.html"><a href="programming.html"><i class="fa fa-check"></i>Programming</a><ul>
<li class="chapter" data-level="" data-path="advanced-r.html"><a href="advanced-r.html"><i class="fa fa-check"></i>Advanced R</a><ul>
<li class="chapter" data-level="0.0.1" data-path="advanced-r.html"><a href="advanced-r.html#names-and-values"><i class="fa fa-check"></i><b>0.0.1</b> Names and Values</a><ul>
<li class="chapter" data-level="" data-path="advanced-r.html"><a href="advanced-r.html#binding"><i class="fa fa-check"></i>Binding</a></li>
<li class="chapter" data-level="" data-path="advanced-r.html"><a href="advanced-r.html#syntactic-names"><i class="fa fa-check"></i>Syntactic Names</a></li>
<li class="chapter" data-level="" data-path="advanced-r.html"><a href="advanced-r.html#copyonmod"><i class="fa fa-check"></i>Copy-on-Modify</a><ul>
<li class="chapter" data-level="" data-path="advanced-r.html"><a href="advanced-r.html#trace-copying-of-objects"><i class="fa fa-check"></i>Trace Copying of Objects</a></li>
<li class="chapter" data-level="" data-path="advanced-r.html"><a href="advanced-r.html#lobjects"><i class="fa fa-check"></i>List Objects</a></li>
<li class="chapter" data-level="" data-path="advanced-r.html"><a href="advanced-r.html#data-frames"><i class="fa fa-check"></i>Data Frames</a></li>
<li class="chapter" data-level="" data-path="advanced-r.html"><a href="advanced-r.html#character-vectors"><i class="fa fa-check"></i>Character Vectors</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="advanced-r.html"><a href="advanced-r.html#object-size"><i class="fa fa-check"></i>Object Size</a></li>
<li class="chapter" data-level="" data-path="advanced-r.html"><a href="advanced-r.html#modinplace"><i class="fa fa-check"></i>Modify-in-Place</a></li>
<li class="chapter" data-level="" data-path="advanced-r.html"><a href="advanced-r.html#unbinding-and-garbage-collector-gc"><i class="fa fa-check"></i>Unbinding and Garbage Collector (GC)</a></li>
<li class="chapter" data-level="" data-path="advanced-r.html"><a href="advanced-r.html#session-info"><i class="fa fa-check"></i>Session Info</a></li>
</ul></li>
<li class="chapter" data-level="0.0.2" data-path="advanced-r.html"><a href="advanced-r.html#vectors"><i class="fa fa-check"></i><b>0.0.2</b> Vectors</a><ul>
<li class="chapter" data-level="" data-path="advanced-r.html"><a href="advanced-r.html#atomic-vectors"><i class="fa fa-check"></i>Atomic Vectors</a><ul>
<li class="chapter" data-level="" data-path="advanced-r.html"><a href="advanced-r.html#types"><i class="fa fa-check"></i>Types</a></li>
<li class="chapter" data-level="" data-path="advanced-r.html"><a href="advanced-r.html#combine-scalars"><i class="fa fa-check"></i>Combine scalars</a></li>
<li class="chapter" data-level="" data-path="advanced-r.html"><a href="advanced-r.html#missing-values"><i class="fa fa-check"></i>Missing values</a></li>
<li class="chapter" data-level="" data-path="advanced-r.html"><a href="advanced-r.html#testing-and-coercing-vectors"><i class="fa fa-check"></i>Testing and coercing vectors</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="advanced-r.html"><a href="advanced-r.html#attributes"><i class="fa fa-check"></i>Attributes</a><ul>
<li class="chapter" data-level="" data-path="advanced-r.html"><a href="advanced-r.html#getting-and-setting-attributes"><i class="fa fa-check"></i>Getting and setting attributes</a></li>
<li class="chapter" data-level="" data-path="advanced-r.html"><a href="advanced-r.html#names"><i class="fa fa-check"></i>Names</a></li>
<li class="chapter" data-level="" data-path="advanced-r.html"><a href="advanced-r.html#dimensions"><i class="fa fa-check"></i>Dimensions</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="advanced-r.html"><a href="advanced-r.html#s3-atomic-vectors"><i class="fa fa-check"></i>S3 Atomic Vectors</a><ul>
<li class="chapter" data-level="" data-path="advanced-r.html"><a href="advanced-r.html#factors"><i class="fa fa-check"></i>Factors</a></li>
<li class="chapter" data-level="" data-path="advanced-r.html"><a href="advanced-r.html#dates"><i class="fa fa-check"></i>Dates</a></li>
<li class="chapter" data-level="" data-path="advanced-r.html"><a href="advanced-r.html#date-times"><i class="fa fa-check"></i>Date-times</a></li>
<li class="chapter" data-level="" data-path="advanced-r.html"><a href="advanced-r.html#difftimes"><i class="fa fa-check"></i>Difftimes</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="advanced-r.html"><a href="advanced-r.html#lists"><i class="fa fa-check"></i>Lists</a><ul>
<li class="chapter" data-level="" data-path="advanced-r.html"><a href="advanced-r.html#testing-and-coercing-lists"><i class="fa fa-check"></i>Testing and coercing lists</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="advanced-r.html"><a href="advanced-r.html#data-frames-and-tibbles"><i class="fa fa-check"></i>Data frames and tibbles</a><ul>
<li class="chapter" data-level="" data-path="advanced-r.html"><a href="advanced-r.html#creating-data.frame-or-tbl_df"><i class="fa fa-check"></i>Creating data.frame or tbl_df</a></li>
<li class="chapter" data-level="" data-path="advanced-r.html"><a href="advanced-r.html#row-names"><i class="fa fa-check"></i>Row Names</a></li>
<li class="chapter" data-level="" data-path="advanced-r.html"><a href="advanced-r.html#subsetting"><i class="fa fa-check"></i>Subsetting</a></li>
<li class="chapter" data-level="" data-path="advanced-r.html"><a href="advanced-r.html#testing-and-coercion"><i class="fa fa-check"></i>Testing and coercion</a></li>
<li class="chapter" data-level="" data-path="advanced-r.html"><a href="advanced-r.html#list-columns"><i class="fa fa-check"></i>List Columns</a></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="1" data-path="import.html"><a href="import.html"><i class="fa fa-check"></i><b>1</b> Import</a></li>
<li class="chapter" data-level="2" data-path="tidy.html"><a href="tidy.html"><i class="fa fa-check"></i><b>2</b> Tidy</a></li>
<li class="chapter" data-level="3" data-path="transform.html"><a href="transform.html"><i class="fa fa-check"></i><b>3</b> Transform</a></li>
<li class="chapter" data-level="4" data-path="visualise.html"><a href="visualise.html"><i class="fa fa-check"></i><b>4</b> Visualise</a></li>
<li class="chapter" data-level="5" data-path="statistics.html"><a href="statistics.html"><i class="fa fa-check"></i><b>5</b> Statistics</a></li>
<li class="chapter" data-level="6" data-path="communicate.html"><a href="communicate.html"><i class="fa fa-check"></i><b>6</b> Communicate</a><ul>
<li class="chapter" data-level="6.1" data-path="markdownbookdown-tips.html"><a href="markdownbookdown-tips.html"><i class="fa fa-check"></i><b>6.1</b> Markdown/bookdown tips</a><ul>
<li class="chapter" data-level="6.1.1" data-path="markdownbookdown-tips.html"><a href="markdownbookdown-tips.html#syntax"><i class="fa fa-check"></i><b>6.1.1</b> Syntax</a><ul>
<li class="chapter" data-level="" data-path="markdownbookdown-tips.html"><a href="markdownbookdown-tips.html#inline-formatting"><i class="fa fa-check"></i>Inline Formatting</a></li>
<li class="chapter" data-level="" data-path="markdownbookdown-tips.html"><a href="markdownbookdown-tips.html#section-headers"><i class="fa fa-check"></i>Section Headers</a></li>
<li class="chapter" data-level="" data-path="markdownbookdown-tips.html"><a href="markdownbookdown-tips.html#unordered-lists"><i class="fa fa-check"></i>Unordered Lists</a></li>
<li class="chapter" data-level="" data-path="markdownbookdown-tips.html"><a href="markdownbookdown-tips.html#ordered-lists"><i class="fa fa-check"></i>Ordered lists</a></li>
<li class="chapter" data-level="" data-path="markdownbookdown-tips.html"><a href="markdownbookdown-tips.html#block-quotes"><i class="fa fa-check"></i>Block Quotes</a></li>
<li class="chapter" data-level="" data-path="markdownbookdown-tips.html"><a href="markdownbookdown-tips.html#code-blocks"><i class="fa fa-check"></i>Code Blocks</a></li>
<li class="chapter" data-level="6.1.1.1" data-path="markdownbookdown-tips.html"><a href="markdownbookdown-tips.html#tables"><i class="fa fa-check"></i><b>6.1.1.1</b> Tables</a><ul>
<li class="chapter" data-level="6.1.1.1.1" data-path="markdownbookdown-tips.html"><a href="markdownbookdown-tips.html#grid-tables"><i class="fa fa-check"></i><b>6.1.1.1.1</b> Grid Tables</a></li>
<li class="chapter" data-level="6.1.1.1.2" data-path="markdownbookdown-tips.html"><a href="markdownbookdown-tips.html#pipe-tables"><i class="fa fa-check"></i><b>6.1.1.1.2</b> Pipe Tables</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="markdownbookdown-tips.html"><a href="markdownbookdown-tips.html#horizontal-rules"><i class="fa fa-check"></i>Horizontal Rules</a></li>
</ul></li>
<li class="chapter" data-level="6.1.2" data-path="markdownbookdown-tips.html"><a href="markdownbookdown-tips.html#cache-large-code-chunks"><i class="fa fa-check"></i><b>6.1.2</b> Cache large code chunks</a></li>
<li class="chapter" data-level="6.1.3" data-path="markdownbookdown-tips.html"><a href="markdownbookdown-tips.html#chunk-options"><i class="fa fa-check"></i><b>6.1.3</b> Chunk Options</a><ul>
<li class="chapter" data-level="6.1.3.1" data-path="markdownbookdown-tips.html"><a href="markdownbookdown-tips.html#collapse"><i class="fa fa-check"></i><b>6.1.3.1</b> Collapse</a></li>
<li class="chapter" data-level="6.1.3.2" data-path="markdownbookdown-tips.html"><a href="markdownbookdown-tips.html#error"><i class="fa fa-check"></i><b>6.1.3.2</b> Error</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="markdownbookdown-tips.html"><a href="markdownbookdown-tips.html#resources"><i class="fa fa-check"></i>Resources</a></li>
<li class="chapter" data-level="" data-path="markdownbookdown-tips.html"><a href="markdownbookdown-tips.html#chapter-session-info"><i class="fa fa-check"></i>Chapter Session Info</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://bookdown.org" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./"></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="advanced-r" class="section level2 unnumbered">
<h2>Advanced R</h2>
<p><a href="https://adv-r.hadley.nz/">Advanced R</a> 2nd ed. Hadley Wickham</p>
<div id="names-and-values" class="section level3">
<h3><span class="header-section-number">0.0.1</span> Names and Values</h3>
<div id="binding" class="section level4 unnumbered">
<h4>Binding</h4>
<p>In R, names are assigned a value (e.g. a vector doesn’t have a name, rather, a name(s) points to a vector). The actual address of an object is exposed by <code>lobstr::obj_addr()</code>.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1">x &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">10</span></a>
<a class="sourceLine" id="cb1-2" title="2"><span class="kw">obj_addr</span>(x)</a>
<a class="sourceLine" id="cb1-3" title="3"><span class="co">## [1] &quot;0x16b0fd08&quot;</span></a>
<a class="sourceLine" id="cb1-4" title="4"></a>
<a class="sourceLine" id="cb1-5" title="5"><span class="co"># notice x and y are pointers to the same object</span></a>
<a class="sourceLine" id="cb1-6" title="6">y &lt;-<span class="st"> </span>x</a>
<a class="sourceLine" id="cb1-7" title="7"><span class="kw">obj_addr</span>(y)</a>
<a class="sourceLine" id="cb1-8" title="8"><span class="co">## [1] &quot;0x16b0fd08&quot;</span></a>
<a class="sourceLine" id="cb1-9" title="9"></a>
<a class="sourceLine" id="cb1-10" title="10"><span class="co"># this applies to function arguments in their environment as well</span></a>
<a class="sourceLine" id="cb1-11" title="11">fn &lt;-<span class="st"> </span><span class="cf">function</span>(z){</a>
<a class="sourceLine" id="cb1-12" title="12">  z</a>
<a class="sourceLine" id="cb1-13" title="13">}</a>
<a class="sourceLine" id="cb1-14" title="14"><span class="co"># fn() returns the argument z at the same address</span></a>
<a class="sourceLine" id="cb1-15" title="15"><span class="kw">obj_addr</span>(<span class="kw">fn</span>(x))</a>
<a class="sourceLine" id="cb1-16" title="16"><span class="co">## [1] &quot;0x16b0fd08&quot;</span></a></code></pre></div>
</div>
<div id="syntactic-names" class="section level4 unnumbered">
<h4>Syntactic Names</h4>
<p>Names in R can be letters, numbers, <code>.</code> or <code>_</code>; but cannot start with a number or <code>_</code> or contain <code>?Reserved</code> words.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1"><span class="co"># assigning a vector a name startign with `_` throws an error</span></a>
<a class="sourceLine" id="cb2-2" title="2">_x &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">10</span></a>
<a class="sourceLine" id="cb2-3" title="3"><span class="co">## Error: &lt;text&gt;:2:1: unexpected input</span></a>
<a class="sourceLine" id="cb2-4" title="4"><span class="co">## 1: # assigning a vector a name startign with `_` throws an error</span></a>
<a class="sourceLine" id="cb2-5" title="5"><span class="co">## 2: _</span></a>
<a class="sourceLine" id="cb2-6" title="6"><span class="co">##    ^</span></a></code></pre></div>
</div>
<div id="copyonmod" class="section level4 unnumbered">
<h4>Copy-on-Modify</h4>
<p>R objects are generally immutable. A new copy is made when you modify an object. There are two <a href="advanced-r.html#modinplace">Modify-in-Place</a> exceptions.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1"><span class="co"># create vector x</span></a>
<a class="sourceLine" id="cb3-2" title="2">x &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">10</span></a>
<a class="sourceLine" id="cb3-3" title="3"><span class="kw">obj_addr</span>(x)</a>
<a class="sourceLine" id="cb3-4" title="4"><span class="co">## [1] &quot;0x18feee48&quot;</span></a>
<a class="sourceLine" id="cb3-5" title="5"></a>
<a class="sourceLine" id="cb3-6" title="6"><span class="co"># modify first value in x</span></a>
<a class="sourceLine" id="cb3-7" title="7">x[[<span class="dv">1</span>]] &lt;-<span class="st"> </span><span class="dv">0</span></a>
<a class="sourceLine" id="cb3-8" title="8"></a>
<a class="sourceLine" id="cb3-9" title="9"><span class="co"># note x now points to a new object</span></a>
<a class="sourceLine" id="cb3-10" title="10"><span class="kw">obj_addr</span>(x)</a>
<a class="sourceLine" id="cb3-11" title="11"><span class="co">## [1] &quot;0x1905cd10&quot;</span></a></code></pre></div>
<div id="trace-copying-of-objects" class="section level5 unnumbered">
<h5>Trace Copying of Objects</h5>
<p><code>base::tracemem()</code> will mark an object and print a message whenever it is copied. This is
a major cause of hard-to-predict memory usage.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1"><span class="co"># tell R to trace copies of object reference `x`</span></a>
<a class="sourceLine" id="cb4-2" title="2"><span class="kw">tracemem</span>(<span class="dt">x =</span> x)</a>
<a class="sourceLine" id="cb4-3" title="3"></a>
<a class="sourceLine" id="cb4-4" title="4"><span class="co"># modify the first element in vector `x`</span></a>
<a class="sourceLine" id="cb4-5" title="5"><span class="co"># R prints a tracemem message to show the object is copied to a new address</span></a>
<a class="sourceLine" id="cb4-6" title="6">x[[<span class="dv">1</span>]] &lt;-<span class="st"> </span><span class="dv">2</span></a>
<a class="sourceLine" id="cb4-7" title="7"><span class="co">#&gt; tracemem[0x000002379ca5a190 -&gt; 0x000002379cd8dbb0]:</span></a>
<a class="sourceLine" id="cb4-8" title="8"></a>
<a class="sourceLine" id="cb4-9" title="9"><span class="co"># tell R to stop tracing this object</span></a>
<a class="sourceLine" id="cb4-10" title="10">base<span class="op">::</span><span class="kw">untracemem</span>(<span class="dt">x =</span> x)</a></code></pre></div>
</div>
<div id="lobjects" class="section level5 unnumbered">
<h5>List Objects</h5>
<p>Just like variables, each element of a list also points to a value. <a href="advanced-r.html#copyonmod">Copy-on-modify</a> and <a href="advanced-r.html#modinplace">modify-in-place</a> applies here as well. R creates a <strong>shallow</strong> copy of the list. Meaning
the list object and its bindings are copied; however, the underlying values are not.</p>
<p>In a deep copy, like prior to R 3.1.0, the underlying values are also copied.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1"><span class="co"># create a list named `l`</span></a>
<a class="sourceLine" id="cb5-2" title="2">l &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>, <span class="ot">TRUE</span>, <span class="kw">c</span>(<span class="st">&#39;Apple&#39;</span>,<span class="st">&#39;Broccoli&#39;</span>,<span class="st">&#39;Chowder&#39;</span>))</a>
<a class="sourceLine" id="cb5-3" title="3"></a>
<a class="sourceLine" id="cb5-4" title="4"><span class="co"># show the address of the third list element</span></a>
<a class="sourceLine" id="cb5-5" title="5"><span class="kw">obj_addr</span>(l[[<span class="dv">3</span>]])</a>
<a class="sourceLine" id="cb5-6" title="6"><span class="co">## [1] &quot;0x1955d5c0&quot;</span></a>
<a class="sourceLine" id="cb5-7" title="7"></a>
<a class="sourceLine" id="cb5-8" title="8"><span class="co"># modify the third list element</span></a>
<a class="sourceLine" id="cb5-9" title="9">l[[<span class="dv">3</span>]] &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;Appricot&#39;</span>,<span class="st">&#39;Basmati Rice&#39;</span>,<span class="st">&#39;Cheese&#39;</span>)</a>
<a class="sourceLine" id="cb5-10" title="10"></a>
<a class="sourceLine" id="cb5-11" title="11"><span class="co"># the third list element&#39;s address is changed</span></a>
<a class="sourceLine" id="cb5-12" title="12"><span class="kw">obj_addr</span>(l[[<span class="dv">3</span>]])</a>
<a class="sourceLine" id="cb5-13" title="13"><span class="co">## [1] &quot;0x196259f0&quot;</span></a></code></pre></div>
<p>Use <code>lobstr::ref()</code> to see common values between lists:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" title="1"><span class="co"># create a list object</span></a>
<a class="sourceLine" id="cb6-2" title="2">listA &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>)</a>
<a class="sourceLine" id="cb6-3" title="3"></a>
<a class="sourceLine" id="cb6-4" title="4"><span class="co"># create a new pointer to the same list object</span></a>
<a class="sourceLine" id="cb6-5" title="5">listB &lt;-<span class="st"> </span>listA</a>
<a class="sourceLine" id="cb6-6" title="6"></a>
<a class="sourceLine" id="cb6-7" title="7"><span class="co"># modify the third list element of listB, creating a shallow copy of the list object </span></a>
<a class="sourceLine" id="cb6-8" title="8">listB[[<span class="dv">3</span>]] &lt;-<span class="st"> </span><span class="dv">4</span></a>
<a class="sourceLine" id="cb6-9" title="9"></a>
<a class="sourceLine" id="cb6-10" title="10"><span class="co"># ref() lists the address of each list element. Notice two values are still shared </span></a>
<a class="sourceLine" id="cb6-11" title="11"><span class="co"># between `listA` and `listB`.</span></a>
<a class="sourceLine" id="cb6-12" title="12"><span class="kw">ref</span>(listA, listB)</a>
<a class="sourceLine" id="cb6-13" title="13"><span class="co">## o [1:0x1997dab0] &lt;list&gt; </span></a>
<a class="sourceLine" id="cb6-14" title="14"><span class="co">## +-[2:0x19812988] &lt;dbl&gt; </span></a>
<a class="sourceLine" id="cb6-15" title="15"><span class="co">## +-[3:0x19812950] &lt;dbl&gt; </span></a>
<a class="sourceLine" id="cb6-16" title="16"><span class="co">## \-[4:0x19812918] &lt;dbl&gt; </span></a>
<a class="sourceLine" id="cb6-17" title="17"><span class="co">##  </span></a>
<a class="sourceLine" id="cb6-18" title="18"><span class="co">## o [5:0x199f43b0] &lt;list&gt; </span></a>
<a class="sourceLine" id="cb6-19" title="19"><span class="co">## +-[2:0x19812988] </span></a>
<a class="sourceLine" id="cb6-20" title="20"><span class="co">## +-[3:0x19812950] </span></a>
<a class="sourceLine" id="cb6-21" title="21"><span class="co">## \-[6:0x19830b20] &lt;dbl&gt;</span></a></code></pre></div>
</div>
<div id="data-frames" class="section level5 unnumbered">
<h5>Data Frames</h5>
<p>A data frame is simply a list where each element is a vector of the same length.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" title="1"><span class="co"># create a data frame with three columns</span></a>
<a class="sourceLine" id="cb7-2" title="2">df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">col1 =</span> <span class="ot">TRUE</span>, </a>
<a class="sourceLine" id="cb7-3" title="3">                 <span class="dt">col2 =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">10</span>, </a>
<a class="sourceLine" id="cb7-4" title="4">                 <span class="dt">col3 =</span> <span class="kw">rep</span>(<span class="dt">x =</span> <span class="kw">c</span>(<span class="st">&#39;On&#39;</span>,<span class="st">&#39;Off&#39;</span>), </a>
<a class="sourceLine" id="cb7-5" title="5">                            <span class="dt">length.out =</span> <span class="dv">10</span>))</a>
<a class="sourceLine" id="cb7-6" title="6"></a>
<a class="sourceLine" id="cb7-7" title="7"><span class="co"># show the address of the data frame and each element (i.e. column)</span></a>
<a class="sourceLine" id="cb7-8" title="8"><span class="kw">ref</span>(df)</a>
<a class="sourceLine" id="cb7-9" title="9"><span class="co">## o [1:0x1ac64988] &lt;df[,3]&gt; </span></a>
<a class="sourceLine" id="cb7-10" title="10"><span class="co">## +-col1 = [2:0x1ac487b0] &lt;lgl&gt; </span></a>
<a class="sourceLine" id="cb7-11" title="11"><span class="co">## +-col2 = [3:0x1ac40cd0] &lt;int&gt; </span></a>
<a class="sourceLine" id="cb7-12" title="12"><span class="co">## \-col3 = [4:0x1ac48900] &lt;fct&gt;</span></a></code></pre></div>
<p>When a <strong>column</strong> is modified only one element is copied:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" title="1"><span class="co"># modify a column and note the addresses of the unchanged columns remain the same</span></a>
<a class="sourceLine" id="cb8-2" title="2"><span class="co"># because they point to the same objects as before</span></a>
<a class="sourceLine" id="cb8-3" title="3">df<span class="op">$</span>col1 &lt;-<span class="st"> </span><span class="ot">FALSE</span>; <span class="kw">ref</span>(df)</a>
<a class="sourceLine" id="cb8-4" title="4"><span class="co">## o [1:0x1afa49e0] &lt;df[,3]&gt; </span></a>
<a class="sourceLine" id="cb8-5" title="5"><span class="co">## +-col1 = [2:0x1af8fe80] &lt;lgl&gt; </span></a>
<a class="sourceLine" id="cb8-6" title="6"><span class="co">## +-col2 = [3:0x1ac40cd0] &lt;int&gt; </span></a>
<a class="sourceLine" id="cb8-7" title="7"><span class="co">## \-col3 = [4:0x1ac48900] &lt;fct&gt;</span></a></code></pre></div>
<p>This has important consequences for memory when you update <strong>rows</strong> of data where each
element gets copied:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" title="1"><span class="co"># modify the first row of the data frame</span></a>
<a class="sourceLine" id="cb9-2" title="2">df[<span class="dv">1</span>,] &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="dv">0</span>, <span class="st">&#39;Off&#39;</span>)</a>
<a class="sourceLine" id="cb9-3" title="3"></a>
<a class="sourceLine" id="cb9-4" title="4"><span class="co"># *all* elements are copied to new addresses</span></a>
<a class="sourceLine" id="cb9-5" title="5"><span class="kw">ref</span>(df)</a>
<a class="sourceLine" id="cb9-6" title="6"><span class="co">## o [1:0x1b3a8ef0] &lt;df[,3]&gt; </span></a>
<a class="sourceLine" id="cb9-7" title="7"><span class="co">## +-col1 = [2:0x1b3a0d30] &lt;chr&gt; </span></a>
<a class="sourceLine" id="cb9-8" title="8"><span class="co">## +-col2 = [3:0x1b3b2b40] &lt;chr&gt; </span></a>
<a class="sourceLine" id="cb9-9" title="9"><span class="co">## \-col3 = [4:0x1b3a4fe0] &lt;fct&gt;</span></a></code></pre></div>
</div>
<div id="character-vectors" class="section level5 unnumbered">
<h5>Character Vectors</h5>
<p>R uses a <em>global string pool</em> to store unique character objects so they are not duplicated
unnecessarily. Use the <code>character</code> argument to show their address in the global string pool
with <code>lobstr::ref()</code>:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" title="1"><span class="co"># create a character vector</span></a>
<a class="sourceLine" id="cb10-2" title="2">chr &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;Quarter&#39;</span>,</a>
<a class="sourceLine" id="cb10-3" title="3">         <span class="st">&#39;Dime&#39;</span>,</a>
<a class="sourceLine" id="cb10-4" title="4">         <span class="st">&#39;Nickle&#39;</span>,</a>
<a class="sourceLine" id="cb10-5" title="5">         <span class="st">&#39;Penny&#39;</span>,</a>
<a class="sourceLine" id="cb10-6" title="6">         <span class="st">&#39;Penny&#39;</span>)</a>
<a class="sourceLine" id="cb10-7" title="7"></a>
<a class="sourceLine" id="cb10-8" title="8"><span class="co"># show addresses in the global string pool. Notice the shared value for &#39;Penny&#39;</span></a>
<a class="sourceLine" id="cb10-9" title="9"><span class="kw">ref</span>(chr, </a>
<a class="sourceLine" id="cb10-10" title="10">    <span class="dt">character =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<pre><code>## o [1:0x14306490] &lt;chr&gt; 
## +-[2:0x15513a70] &lt;string: &quot;Quarter&quot;&gt; 
## +-[3:0x15513ae0] &lt;string: &quot;Dime&quot;&gt; 
## +-[4:0x15513b88] &lt;string: &quot;Nickle&quot;&gt; 
## +-[5:0x15513bf8] &lt;string: &quot;Penny&quot;&gt; 
## \-[5:0x15513bf8]</code></pre>
</div>
</div>
<div id="object-size" class="section level4 unnumbered">
<h4>Object Size</h4>
<p><code>lobstr::obj_size()</code> shows the amount of memory an object takes, while <code>obj_sizes()</code>
breaks down multiple objects into their individual contribution to <em>total</em> memory.</p>
<p>Due to binding names, global string pools, and ALTREP (alternate representation where some vectors
are stored in a compact manor; e.g. 1:1000 only stores the first and last numbers, not 1,000 numbers)
the size of objects may surprise you.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" title="1"><span class="co"># create a length one chracter vector and a length 100 character vector</span></a>
<a class="sourceLine" id="cb12-2" title="2">x &lt;-<span class="st"> &#39;Charlie&#39;</span></a>
<a class="sourceLine" id="cb12-3" title="3">y &lt;-<span class="st"> </span><span class="kw">rep</span>(<span class="dt">x =</span> <span class="st">&#39;Charlie&#39;</span>, <span class="dt">times =</span> <span class="dv">100</span>)</a>
<a class="sourceLine" id="cb12-4" title="4"></a>
<a class="sourceLine" id="cb12-5" title="5"><span class="co"># y is only ~8x the size of x, not 100x</span></a>
<a class="sourceLine" id="cb12-6" title="6"><span class="kw">obj_size</span>(x); <span class="kw">obj_size</span>(y)</a>
<a class="sourceLine" id="cb12-7" title="7"><span class="co">## 112 B</span></a>
<a class="sourceLine" id="cb12-8" title="8"><span class="co">## 904 B</span></a>
<a class="sourceLine" id="cb12-9" title="9"></a>
<a class="sourceLine" id="cb12-10" title="10"></a>
<a class="sourceLine" id="cb12-11" title="11">z &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">10</span></a>
<a class="sourceLine" id="cb12-12" title="12"></a>
<a class="sourceLine" id="cb12-13" title="13"><span class="co"># create a list with one element `z`</span></a>
<a class="sourceLine" id="cb12-14" title="14">list1 &lt;-<span class="st"> </span><span class="kw">list</span>(z)</a>
<a class="sourceLine" id="cb12-15" title="15"><span class="co"># create a list with three elements, all `z`</span></a>
<a class="sourceLine" id="cb12-16" title="16">list2 &lt;-<span class="st"> </span><span class="kw">list</span>(z, z, z)</a>
<a class="sourceLine" id="cb12-17" title="17"></a>
<a class="sourceLine" id="cb12-18" title="18"><span class="co"># list2 only contributes an extra 80 Bytes to the total memory between the two</span></a>
<a class="sourceLine" id="cb12-19" title="19"><span class="kw">obj_sizes</span>(list1, list2)</a>
<a class="sourceLine" id="cb12-20" title="20"><span class="co">## * 736 B</span></a>
<a class="sourceLine" id="cb12-21" title="21"><span class="co">## *  80 B</span></a></code></pre></div>
</div>
<div id="modinplace" class="section level4 unnumbered">
<h4>Modify-in-Place</h4>
<p>There are two places where R will optimize memory by modfiying an object “in place”
(i.e. does not make a copy).</p>
<ol style="list-style-type: decimal">
<li>objects with a single binding</li>
</ol>
<pre><code>&gt; hats &lt;- c(&#39;red&#39;,&#39;brown&#39;,&#39;blue&#39;)
&gt; obj_addr(hats)
[1] &quot;0x1d51fe614d8&quot;
&gt; 
&gt; hats[[1]] &lt;- &#39;orange&#39;
&gt; obj_addr(hats)
[1] &quot;0x1d51fe614d8&quot;

# note this is output from the R Console. RStudio runs everything within an Environment
# which breaks modify-in-place behavior</code></pre>
<p>This is one reason why looping in R is inefficient, the user is unwittingly copying
objects many times over:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" title="1"><span class="co"># create a dataframe</span></a>
<a class="sourceLine" id="cb14-2" title="2">df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">col1 =</span> <span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>))</a>
<a class="sourceLine" id="cb14-3" title="3"></a>
<a class="sourceLine" id="cb14-4" title="4"><span class="co"># trace copies of this dataframe</span></a>
<a class="sourceLine" id="cb14-5" title="5"><span class="kw">tracemem</span>(df)</a>
<a class="sourceLine" id="cb14-6" title="6"><span class="co">## [1] &quot;&lt;00000000196335A8&gt;&quot;</span></a>
<a class="sourceLine" id="cb14-7" title="7"></a>
<a class="sourceLine" id="cb14-8" title="8"><span class="co"># use a for loop to increment the dataframe values</span></a>
<a class="sourceLine" id="cb14-9" title="9"><span class="co"># R copies the object 12 times!!!</span></a>
<a class="sourceLine" id="cb14-10" title="10"><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">3</span>){</a>
<a class="sourceLine" id="cb14-11" title="11">  df[[<span class="dv">1</span>]][i] &lt;-<span class="st"> </span>df[[<span class="dv">1</span>]][i] <span class="op">+</span><span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb14-12" title="12">}</a>
<a class="sourceLine" id="cb14-13" title="13"><span class="co">## tracemem[0x00000000196335a8 -&gt; 0x0000000019892be8]: eval eval withVisible withCallingHandlers handle timing_fn evaluate_call &lt;Anonymous&gt; evaluate in_dir block_exec call_block process_group.block process_group withCallingHandlers process_file &lt;Anonymous&gt; &lt;Anonymous&gt; do.call eval eval eval eval eval.parent local </span></a>
<a class="sourceLine" id="cb14-14" title="14"><span class="co">## tracemem[0x0000000019892be8 -&gt; 0x0000000019892a28]: eval eval withVisible withCallingHandlers handle timing_fn evaluate_call &lt;Anonymous&gt; evaluate in_dir block_exec call_block process_group.block process_group withCallingHandlers process_file &lt;Anonymous&gt; &lt;Anonymous&gt; do.call eval eval eval eval eval.parent local </span></a>
<a class="sourceLine" id="cb14-15" title="15"><span class="co">## tracemem[0x0000000019892a28 -&gt; 0x00000000198a4e18]: [[&lt;-.data.frame [[&lt;- eval eval withVisible withCallingHandlers handle timing_fn evaluate_call &lt;Anonymous&gt; evaluate in_dir block_exec call_block process_group.block process_group withCallingHandlers process_file &lt;Anonymous&gt; &lt;Anonymous&gt; do.call eval eval eval eval eval.parent local </span></a>
<a class="sourceLine" id="cb14-16" title="16"><span class="co">## tracemem[0x00000000198a4e18 -&gt; 0x00000000198a4c90]: [[&lt;-.data.frame [[&lt;- eval eval withVisible withCallingHandlers handle timing_fn evaluate_call &lt;Anonymous&gt; evaluate in_dir block_exec call_block process_group.block process_group withCallingHandlers process_file &lt;Anonymous&gt; &lt;Anonymous&gt; do.call eval eval eval eval eval.parent local </span></a>
<a class="sourceLine" id="cb14-17" title="17"><span class="co">## tracemem[0x00000000198a4c90 -&gt; 0x00000000198a4b08]: eval eval withVisible withCallingHandlers handle timing_fn evaluate_call &lt;Anonymous&gt; evaluate in_dir block_exec call_block process_group.block process_group withCallingHandlers process_file &lt;Anonymous&gt; &lt;Anonymous&gt; do.call eval eval eval eval eval.parent local </span></a>
<a class="sourceLine" id="cb14-18" title="18"><span class="co">## tracemem[0x00000000198a4b08 -&gt; 0x00000000198a49b8]: eval eval withVisible withCallingHandlers handle timing_fn evaluate_call &lt;Anonymous&gt; evaluate in_dir block_exec call_block process_group.block process_group withCallingHandlers process_file &lt;Anonymous&gt; &lt;Anonymous&gt; do.call eval eval eval eval eval.parent local </span></a>
<a class="sourceLine" id="cb14-19" title="19"><span class="co">## tracemem[0x00000000198a49b8 -&gt; 0x00000000198a48d8]: [[&lt;-.data.frame [[&lt;- eval eval withVisible withCallingHandlers handle timing_fn evaluate_call &lt;Anonymous&gt; evaluate in_dir block_exec call_block process_group.block process_group withCallingHandlers process_file &lt;Anonymous&gt; &lt;Anonymous&gt; do.call eval eval eval eval eval.parent local </span></a>
<a class="sourceLine" id="cb14-20" title="20"><span class="co">## tracemem[0x00000000198a48d8 -&gt; 0x00000000198a4750]: [[&lt;-.data.frame [[&lt;- eval eval withVisible withCallingHandlers handle timing_fn evaluate_call &lt;Anonymous&gt; evaluate in_dir block_exec call_block process_group.block process_group withCallingHandlers process_file &lt;Anonymous&gt; &lt;Anonymous&gt; do.call eval eval eval eval eval.parent local </span></a>
<a class="sourceLine" id="cb14-21" title="21"><span class="co">## tracemem[0x00000000198a4750 -&gt; 0x00000000198a45c8]: eval eval withVisible withCallingHandlers handle timing_fn evaluate_call &lt;Anonymous&gt; evaluate in_dir block_exec call_block process_group.block process_group withCallingHandlers process_file &lt;Anonymous&gt; &lt;Anonymous&gt; do.call eval eval eval eval eval.parent local </span></a>
<a class="sourceLine" id="cb14-22" title="22"><span class="co">## tracemem[0x00000000198a45c8 -&gt; 0x00000000198a4478]: eval eval withVisible withCallingHandlers handle timing_fn evaluate_call &lt;Anonymous&gt; evaluate in_dir block_exec call_block process_group.block process_group withCallingHandlers process_file &lt;Anonymous&gt; &lt;Anonymous&gt; do.call eval eval eval eval eval.parent local </span></a>
<a class="sourceLine" id="cb14-23" title="23"><span class="co">## tracemem[0x00000000198a4478 -&gt; 0x00000000198a4398]: [[&lt;-.data.frame [[&lt;- eval eval withVisible withCallingHandlers handle timing_fn evaluate_call &lt;Anonymous&gt; evaluate in_dir block_exec call_block process_group.block process_group withCallingHandlers process_file &lt;Anonymous&gt; &lt;Anonymous&gt; do.call eval eval eval eval eval.parent local </span></a>
<a class="sourceLine" id="cb14-24" title="24"><span class="co">## tracemem[0x00000000198a4398 -&gt; 0x00000000198a4210]: [[&lt;-.data.frame [[&lt;- eval eval withVisible withCallingHandlers handle timing_fn evaluate_call &lt;Anonymous&gt; evaluate in_dir block_exec call_block process_group.block process_group withCallingHandlers process_file &lt;Anonymous&gt; &lt;Anonymous&gt; do.call eval eval eval eval eval.parent local</span></a>
<a class="sourceLine" id="cb14-25" title="25"></a>
<a class="sourceLine" id="cb14-26" title="26"><span class="co"># turn of object memory trace</span></a>
<a class="sourceLine" id="cb14-27" title="27"><span class="kw">untracemem</span>(df)</a></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>Environments</li>
</ol>
<p>Environments are always modified in place and all objects within the environment
keep the same reference.</p>
</div>
<div id="unbinding-and-garbage-collector-gc" class="section level4 unnumbered">
<h4>Unbinding and Garbage Collector (GC)</h4>
<p>The (GC) garbage collector deletes objects that are no longer used and requests
more memory from the operating system as needed to create objects.</p>
<p>For example:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" title="1"><span class="co"># create three objects all bound to `x`</span></a>
<a class="sourceLine" id="cb15-2" title="2">x &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">10</span> </a>
<a class="sourceLine" id="cb15-3" title="3">x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;one&#39;</span>,<span class="st">&#39;two&#39;</span>,<span class="st">&#39;three&#39;</span>)</a>
<a class="sourceLine" id="cb15-4" title="4">x &lt;-<span class="st"> </span><span class="ot">TRUE</span></a>
<a class="sourceLine" id="cb15-5" title="5"></a>
<a class="sourceLine" id="cb15-6" title="6"><span class="co"># removing `x` causes GC to delete the three objects b/c they have no other bindings</span></a>
<a class="sourceLine" id="cb15-7" title="7"><span class="kw">remove</span>(x)</a></code></pre></div>
<p>You can call GC yourself with <code>base::gc()</code>, but the user should not ever have the need.</p>
</div>
<div id="session-info" class="section level4 unnumbered">
<h4>Session Info</h4>
<pre><code>## R version 3.6.1 (2019-07-05)
## Platform: x86_64-w64-mingw32/x64 (64-bit)
## Running under: Windows 10 x64 (build 18363)
## 
## Matrix products: default
## 
## attached base packages:
## [1] stats     graphics  grDevices utils     datasets  methods   base     
## 
## other attached packages:
## [1] lobstr_1.1.1
## 
## loaded via a namespace (and not attached):
##  [1] Rcpp_1.0.1      bookdown_0.16   digest_0.6.20   crayon_1.3.4   
##  [5] magrittr_1.5    evaluate_0.14   pillar_1.4.2    rlang_0.4.5    
##  [9] stringi_1.4.3   vctrs_0.2.4     rmarkdown_1.13  tools_3.6.1    
## [13] stringr_1.4.0   xfun_0.8        yaml_2.2.0      compiler_3.6.1 
## [17] htmltools_0.4.0 knitr_1.23</code></pre>

</div>
</div>
<div id="vectors" class="section level3">
<h3><span class="header-section-number">0.0.2</span> Vectors</h3>
<p>R has two types of vectors: <strong>atomic</strong> vectors and <strong>list</strong> vectors.</p>
<p>Atomic vectors have values all of the same type, while lists can have values of
different types.</p>
<p><strong>NULL</strong> is not a vector, but is often used in R to represent a zero length
vector. For practical purposes you can consider it a vector.</p>
<p>Vectors can have <em>attributes</em>; the most important are <strong>dimension</strong> and <strong>class</strong>.</p>
<ul>
<li>dimension: turns a vector into matrices and arrays</li>
<li>class: critical for S3 objects like factors, dates &amp; date-time, data frames, and tibbles</li>
</ul>
<div id="atomic-vectors" class="section level4 unnumbered">
<h4>Atomic Vectors</h4>
<div id="types" class="section level5 unnumbered">
<h5>Types</h5>
<p>There are four primary types of atomic vectors, and their <strong>scalars</strong> (<em>i.e. individual value</em>) can
be instantiated as:</p>
<ol style="list-style-type: decimal">
<li><strong>Logical</strong>: <code>TRUE</code>/<code>T</code>;<code>FALSE</code>/<code>F</code></li>
<li><strong>Double</strong>: decimal <code>2.345</code>, scientific <code>2e10</code>, hexadecimal <code>3425h</code>, infinite <code>Inf</code>/<code>-Inf</code>, Not a Number <code>NaN</code></li>
<li><strong>Integer</strong>: a non-fractional double followed by <code>L</code> (e.g. <code>7L</code>, <code>2e7L</code>, <code>3425hL</code> )</li>
<li><strong>Character</strong>: strings surrounded by single/double quotes; <code>'Cats'</code> or <code>"Dogs"</code></li>
</ol>
<p>Doubles and Integers belong to meta-type <strong>numeric</strong>. <code>is.numeric()</code> tests if a vector can be interpreted
as a number: <code>is.numeric(2.2)</code> = TRUE = <code>is.numeric(2L)</code> = TRUE</p>
</div>
<div id="combine-scalars" class="section level5 unnumbered">
<h5>Combine scalars</h5>
<p>Scalars can be combined to make longer vectors using <code>c()</code>:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" title="1"><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>)</a>
<a class="sourceLine" id="cb17-2" title="2"><span class="co">## [1] 1 2 3</span></a>
<a class="sourceLine" id="cb17-3" title="3"><span class="kw">c</span>(T,T,F)</a>
<a class="sourceLine" id="cb17-4" title="4"><span class="co">## [1]  TRUE  TRUE FALSE</span></a></code></pre></div>
<p>R will flatten atomic vectors when combined with other atomic vectors:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" title="1"><span class="kw">c</span>(<span class="dv">1</span>,<span class="kw">c</span>(<span class="dv">2</span>,<span class="kw">c</span>(<span class="fl">2.1</span>,<span class="fl">2.2</span>,<span class="fl">2.3</span>)),<span class="dv">4</span>)</a>
<a class="sourceLine" id="cb18-2" title="2"><span class="co">## [1] 1.0 2.0 2.1 2.2 2.3 4.0</span></a></code></pre></div>
<p><code>typeof()</code> and <code>length()</code> will return the type and length of an atomic vector:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" title="1">x &lt;-<span class="st"> </span><span class="ot">TRUE</span>; y &lt;-<span class="st"> </span><span class="kw">c</span>(1L, 2L, 3L, 4L)</a>
<a class="sourceLine" id="cb19-2" title="2"></a>
<a class="sourceLine" id="cb19-3" title="3"><span class="kw">typeof</span>(x); <span class="kw">length</span>(x)</a>
<a class="sourceLine" id="cb19-4" title="4"><span class="co">## [1] &quot;logical&quot;</span></a>
<a class="sourceLine" id="cb19-5" title="5"><span class="co">## [1] 1</span></a>
<a class="sourceLine" id="cb19-6" title="6"><span class="kw">typeof</span>(y); <span class="kw">length</span>(y)</a>
<a class="sourceLine" id="cb19-7" title="7"><span class="co">## [1] &quot;integer&quot;</span></a>
<a class="sourceLine" id="cb19-8" title="8"><span class="co">## [1] 4</span></a>
<a class="sourceLine" id="cb19-9" title="9"><span class="kw">typeof</span>(<span class="ot">NULL</span>); <span class="kw">length</span>(<span class="ot">NULL</span>)</a>
<a class="sourceLine" id="cb19-10" title="10"><span class="co">## [1] &quot;NULL&quot;</span></a>
<a class="sourceLine" id="cb19-11" title="11"><span class="co">## [1] 0</span></a></code></pre></div>
</div>
<div id="missing-values" class="section level5 unnumbered">
<h5>Missing values</h5>
<p>Missing values are represented by <code>NA</code> (Not Applicable). There are logical (<code>NA</code>),
integer (<code>NA_integer_</code>), double (<code>NA_real_</code>), and character (<code>NA_character_</code>) types
but R will parse the appropriate <code>NA</code> needed.</p>
<p>Many logistical tests in R containing <code>NA</code> will return <code>NA</code>:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" title="1"><span class="co"># not false returns true; not NA returns NA</span></a>
<a class="sourceLine" id="cb20-2" title="2"><span class="op">!</span><span class="ot">FALSE</span>; <span class="op">!</span><span class="ot">NA</span></a>
<a class="sourceLine" id="cb20-3" title="3"><span class="co">## [1] TRUE</span></a>
<a class="sourceLine" id="cb20-4" title="4"><span class="co">## [1] NA</span></a></code></pre></div>
<p>For this reason, finding missing values in a vector is not obvious:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" title="1">x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">0</span>,<span class="ot">NA</span>,<span class="ot">NA</span>,<span class="dv">3</span>,<span class="dv">4</span>)</a>
<a class="sourceLine" id="cb21-2" title="2"><span class="co"># a logistical test for NA returns all NA</span></a>
<a class="sourceLine" id="cb21-3" title="3">x<span class="op">==</span><span class="ot">NA</span></a>
<a class="sourceLine" id="cb21-4" title="4"><span class="co">## [1] NA NA NA NA NA</span></a></code></pre></div>
<p>Instead, use <code>is.na()</code> to test for missing values:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" title="1"><span class="kw">is.na</span>(x)</a>
<a class="sourceLine" id="cb22-2" title="2"><span class="co">## [1] FALSE  TRUE  TRUE FALSE FALSE</span></a></code></pre></div>
<p>The exception is when all possible values would not change the result:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb23-1" title="1"><span class="co"># this logical statement is true regardless of all possible NA values</span></a>
<a class="sourceLine" id="cb23-2" title="2"><span class="ot">NA</span> <span class="op">|</span><span class="st"> </span><span class="ot">TRUE</span></a>
<a class="sourceLine" id="cb23-3" title="3"><span class="co">## [1] TRUE</span></a></code></pre></div>
</div>
<div id="testing-and-coercing-vectors" class="section level5 unnumbered">
<h5>Testing and coercing vectors</h5>
<p>There are many <code>is.*()</code> pattern functions in R to test vector type. <code>is.logical()</code>,
<code>is.integer()</code>, <code>is.double()</code>, and <code>is.character()</code> all test for the four primary
atomic vector types:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb24-1" title="1"><span class="kw">is.logical</span>(<span class="dt">x =</span> <span class="kw">c</span>(T,T,F,F))</a>
<a class="sourceLine" id="cb24-2" title="2"><span class="co">## [1] TRUE</span></a>
<a class="sourceLine" id="cb24-3" title="3"><span class="kw">is.integer</span>(<span class="dt">x =</span> <span class="kw">c</span>(<span class="fl">2.2</span>, <span class="fl">3.0</span>))</a>
<a class="sourceLine" id="cb24-4" title="4"><span class="co">## [1] FALSE</span></a></code></pre></div>
<p>However, some <code>is.*()</code> pattern functions behave unexpectedly. <code>is.numeric()</code>,
for example, returns false for factors, Date, POSIXt and difftime because they
have their own methods for detection; even though they are numbers and arithmetic
generally makes sense. So be sure to read the documentation carefully (<code>?is.numeric()</code>).</p>
<hr />
<p><em>coercing types</em></p>
<p>It is possible to coerce vectors to a new type, or two combine two types of vectors into
one. The types will be coerced in this order: <em>character &gt; double &gt; integer &gt; logical</em></p>
<p>Use <code>as.*()</code> functions to specifically coerce types. R can also implicitly coerce types
when needed. R will give a warning message if it fails or <code>NA</code>s are introduced.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb25-1" title="1"><span class="co"># combining a double and a character returns a character vector</span></a>
<a class="sourceLine" id="cb25-2" title="2"><span class="kw">str</span>(<span class="kw">c</span>(<span class="dv">1</span>,<span class="st">&quot;2&quot;</span>))</a>
<a class="sourceLine" id="cb25-3" title="3"><span class="co">##  chr [1:2] &quot;1&quot; &quot;2&quot;</span></a>
<a class="sourceLine" id="cb25-4" title="4"></a>
<a class="sourceLine" id="cb25-5" title="5"><span class="co"># implicitly return the sum of a logical as integer </span></a>
<a class="sourceLine" id="cb25-6" title="6"><span class="kw">str</span>(<span class="kw">sum</span>(<span class="kw">c</span>(T,T,F)))</a>
<a class="sourceLine" id="cb25-7" title="7"><span class="co">##  int 2</span></a>
<a class="sourceLine" id="cb25-8" title="8"></a>
<a class="sourceLine" id="cb25-9" title="9"><span class="co"># explicitly coerce doubles to characters</span></a>
<a class="sourceLine" id="cb25-10" title="10"><span class="kw">str</span>(<span class="kw">as.character</span>(<span class="kw">c</span>(<span class="fl">2e1</span>, <span class="dv">200</span>)))</a>
<a class="sourceLine" id="cb25-11" title="11"><span class="co">##  chr [1:2] &quot;20&quot; &quot;200&quot;</span></a></code></pre></div>
</div>
</div>
<div id="attributes" class="section level4 unnumbered">
<h4>Attributes</h4>
<p>Other data-structures in R are built on top of these atomic vectors using attributes.
For example, the <strong>dimension</strong> attribute transforms vectors into matrices and arrays.</p>
<div id="getting-and-setting-attributes" class="section level5 unnumbered">
<h5>Getting and setting attributes</h5>
<p>Attributes are like meta-data you assign in name-value pairs:</p>
<ul>
<li><code>attr()</code> to retrieve and set single attributes</li>
<li><code>attributes()</code> to retrieve multiple attributes</li>
<li><code>structure()</code> to set multiple attributes</li>
</ul>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb26-1" title="1">fruit &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">10</span></a>
<a class="sourceLine" id="cb26-2" title="2"></a>
<a class="sourceLine" id="cb26-3" title="3"><span class="co"># create fruit attributes type and days old</span></a>
<a class="sourceLine" id="cb26-4" title="4"><span class="kw">attr</span>(<span class="dt">x =</span> fruit, <span class="dt">which =</span> <span class="st">&#39;type&#39;</span>) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;orange&#39;</span>,<span class="st">&#39;apple&#39;</span>,<span class="st">&#39;pear&#39;</span>)</a>
<a class="sourceLine" id="cb26-5" title="5"><span class="kw">attr</span>(fruit,<span class="st">&#39;type&#39;</span>)</a>
<a class="sourceLine" id="cb26-6" title="6"><span class="co">## [1] &quot;orange&quot; &quot;apple&quot;  &quot;pear&quot;</span></a>
<a class="sourceLine" id="cb26-7" title="7"></a>
<a class="sourceLine" id="cb26-8" title="8"><span class="kw">attr</span>(<span class="dt">x =</span> fruit, <span class="dt">which =</span> <span class="st">&#39;days old&#39;</span>) &lt;-<span class="st"> </span><span class="dv">2</span></a>
<a class="sourceLine" id="cb26-9" title="9"><span class="kw">str</span>(<span class="kw">attributes</span>(<span class="dt">x =</span> fruit))</a>
<a class="sourceLine" id="cb26-10" title="10"><span class="co">## List of 2</span></a>
<a class="sourceLine" id="cb26-11" title="11"><span class="co">##  $ type    : chr [1:3] &quot;orange&quot; &quot;apple&quot; &quot;pear&quot;</span></a>
<a class="sourceLine" id="cb26-12" title="12"><span class="co">##  $ days old: num 2</span></a>
<a class="sourceLine" id="cb26-13" title="13"></a>
<a class="sourceLine" id="cb26-14" title="14"><span class="co"># simultaneously create object and attributes</span></a>
<a class="sourceLine" id="cb26-15" title="15">fruit &lt;-<span class="st"> </span><span class="kw">structure</span>(</a>
<a class="sourceLine" id="cb26-16" title="16">  <span class="dv">1</span><span class="op">:</span><span class="dv">10</span>,</a>
<a class="sourceLine" id="cb26-17" title="17">  <span class="dt">type =</span> <span class="kw">c</span>(<span class="st">&#39;orange&#39;</span>,<span class="st">&#39;apple&#39;</span>,<span class="st">&#39;pear&#39;</span>),</a>
<a class="sourceLine" id="cb26-18" title="18">  <span class="st">&#39;days old&#39;</span> =<span class="st"> </span><span class="dv">2</span></a>
<a class="sourceLine" id="cb26-19" title="19">)</a>
<a class="sourceLine" id="cb26-20" title="20"></a>
<a class="sourceLine" id="cb26-21" title="21"><span class="kw">str</span>(<span class="kw">attributes</span>(fruit))</a>
<a class="sourceLine" id="cb26-22" title="22"><span class="co">## List of 2</span></a>
<a class="sourceLine" id="cb26-23" title="23"><span class="co">##  $ type    : chr [1:3] &quot;orange&quot; &quot;apple&quot; &quot;pear&quot;</span></a>
<a class="sourceLine" id="cb26-24" title="24"><span class="co">##  $ days old: num 2</span></a></code></pre></div>
</div>
<div id="names" class="section level5 unnumbered">
<h5>Names</h5>
<p><code>names</code> is a special and important attribute in R. Although it is not enforced,
names should be unique and complete. They can be set several ways:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb27-1" title="1"><span class="co"># on creation</span></a>
<a class="sourceLine" id="cb27-2" title="2">x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dt">a=</span><span class="dv">1</span>,<span class="dt">b=</span><span class="dv">2</span>,<span class="dt">c=</span><span class="dv">3</span>)</a>
<a class="sourceLine" id="cb27-3" title="3"><span class="kw">attr</span>(x, <span class="dt">which=</span><span class="st">&#39;names&#39;</span>)</a>
<a class="sourceLine" id="cb27-4" title="4"><span class="co">## [1] &quot;a&quot; &quot;b&quot; &quot;c&quot;</span></a>
<a class="sourceLine" id="cb27-5" title="5"></a>
<a class="sourceLine" id="cb27-6" title="6"><span class="co"># assigning a vector of names</span></a>
<a class="sourceLine" id="cb27-7" title="7">x &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">3</span></a>
<a class="sourceLine" id="cb27-8" title="8"><span class="kw">names</span>(x) &lt;-<span class="st"> </span>letters[<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>]</a>
<a class="sourceLine" id="cb27-9" title="9"><span class="kw">attr</span>(x, <span class="dt">which=</span><span class="st">&#39;names&#39;</span>)</a>
<a class="sourceLine" id="cb27-10" title="10"><span class="co">## [1] &quot;a&quot; &quot;b&quot; &quot;c&quot;</span></a>
<a class="sourceLine" id="cb27-11" title="11"></a>
<a class="sourceLine" id="cb27-12" title="12"><span class="co"># inline with setNames()</span></a>
<a class="sourceLine" id="cb27-13" title="13">x &lt;-<span class="st"> </span><span class="kw">setNames</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>, letters[<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>])</a>
<a class="sourceLine" id="cb27-14" title="14"><span class="kw">attr</span>(x, <span class="dt">which=</span><span class="st">&#39;names&#39;</span>)</a>
<a class="sourceLine" id="cb27-15" title="15"><span class="co">## [1] &quot;a&quot; &quot;b&quot; &quot;c&quot;</span></a>
<a class="sourceLine" id="cb27-16" title="16"></a>
<a class="sourceLine" id="cb27-17" title="17"><span class="co"># with attr()</span></a>
<a class="sourceLine" id="cb27-18" title="18"><span class="kw">attr</span>(x, <span class="dt">which =</span> <span class="st">&#39;names&#39;</span>) &lt;-<span class="st"> </span>letters[<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>]</a>
<a class="sourceLine" id="cb27-19" title="19"><span class="kw">attr</span>(x, <span class="dt">which=</span><span class="st">&#39;names&#39;</span>)</a>
<a class="sourceLine" id="cb27-20" title="20"><span class="co">## [1] &quot;a&quot; &quot;b&quot; &quot;c&quot;</span></a></code></pre></div>
</div>
<div id="dimensions" class="section level5 unnumbered">
<h5>Dimensions</h5>
<p>The <code>dim</code> attribute transforms <code>NULL</code> dimensional vectors into 2d matrices and multi-dimensional arrays, and can be set by <code>dim()</code>, <code>matrix()</code>, and <code>array()</code>:</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb28-1" title="1">x &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">6</span></a>
<a class="sourceLine" id="cb28-2" title="2"></a>
<a class="sourceLine" id="cb28-3" title="3"><span class="kw">dim</span>(x) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">3</span>)</a>
<a class="sourceLine" id="cb28-4" title="4">x</a>
<a class="sourceLine" id="cb28-5" title="5"><span class="co">##      [,1] [,2] [,3]</span></a>
<a class="sourceLine" id="cb28-6" title="6"><span class="co">## [1,]    1    3    5</span></a>
<a class="sourceLine" id="cb28-7" title="7"><span class="co">## [2,]    2    4    6</span></a>
<a class="sourceLine" id="cb28-8" title="8"></a>
<a class="sourceLine" id="cb28-9" title="9"><span class="kw">matrix</span>(<span class="dt">data =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">6</span>, <span class="dt">nrow =</span> <span class="dv">1</span>, <span class="dt">ncol =</span> <span class="dv">6</span>)</a>
<a class="sourceLine" id="cb28-10" title="10"><span class="co">##      [,1] [,2] [,3] [,4] [,5] [,6]</span></a>
<a class="sourceLine" id="cb28-11" title="11"><span class="co">## [1,]    1    2    3    4    5    6</span></a>
<a class="sourceLine" id="cb28-12" title="12"></a>
<a class="sourceLine" id="cb28-13" title="13"><span class="kw">array</span>(<span class="dt">data =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">6</span>, <span class="dt">dim =</span> <span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">3</span>))</a>
<a class="sourceLine" id="cb28-14" title="14"><span class="co">##      [,1] [,2] [,3]</span></a>
<a class="sourceLine" id="cb28-15" title="15"><span class="co">## [1,]    1    3    5</span></a>
<a class="sourceLine" id="cb28-16" title="16"><span class="co">## [2,]    2    4    6</span></a>
<a class="sourceLine" id="cb28-17" title="17"></a>
<a class="sourceLine" id="cb28-18" title="18"><span class="co"># non-idiomatic</span></a>
<a class="sourceLine" id="cb28-19" title="19"><span class="kw">attr</span>(x, <span class="st">&#39;dim&#39;</span>) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">2</span>)</a>
<a class="sourceLine" id="cb28-20" title="20">x</a>
<a class="sourceLine" id="cb28-21" title="21"><span class="co">##      [,1] [,2]</span></a>
<a class="sourceLine" id="cb28-22" title="22"><span class="co">## [1,]    1    4</span></a>
<a class="sourceLine" id="cb28-23" title="23"><span class="co">## [2,]    2    5</span></a>
<a class="sourceLine" id="cb28-24" title="24"><span class="co">## [3,]    3    6</span></a></code></pre></div>
<p>Vector functions usually have matrix or array counterparts:</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb29-1" title="1"><span class="co"># vector, matrix, and array bindings</span></a>
<a class="sourceLine" id="cb29-2" title="2">v &lt;-<span class="st"> </span><span class="kw">structure</span>(<span class="dt">.Data =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">9</span>, </a>
<a class="sourceLine" id="cb29-3" title="3">               <span class="dt">names =</span> letters[<span class="dv">1</span><span class="op">:</span><span class="dv">9</span>])</a>
<a class="sourceLine" id="cb29-4" title="4"></a>
<a class="sourceLine" id="cb29-5" title="5">m &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="dt">data =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">9</span>, </a>
<a class="sourceLine" id="cb29-6" title="6">            <span class="dt">nrow =</span> <span class="dv">3</span>, </a>
<a class="sourceLine" id="cb29-7" title="7">            <span class="dt">ncol =</span> <span class="dv">3</span>, </a>
<a class="sourceLine" id="cb29-8" title="8">            <span class="dt">dimnames =</span> <span class="kw">list</span>(letters[<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>], </a>
<a class="sourceLine" id="cb29-9" title="9">                            letters[<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>]))</a>
<a class="sourceLine" id="cb29-10" title="10">                                                            </a>
<a class="sourceLine" id="cb29-11" title="11">a &lt;-<span class="st"> </span><span class="kw">array</span>(<span class="dt">data =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">9</span>, </a>
<a class="sourceLine" id="cb29-12" title="12">           <span class="dt">dim =</span> <span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">3</span>), </a>
<a class="sourceLine" id="cb29-13" title="13">           <span class="dt">dimnames =</span> <span class="kw">list</span>(letters[<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>], </a>
<a class="sourceLine" id="cb29-14" title="14">                           letters[<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>]))</a>
<a class="sourceLine" id="cb29-15" title="15"></a>
<a class="sourceLine" id="cb29-16" title="16"><span class="co"># Names</span></a>
<a class="sourceLine" id="cb29-17" title="17"><span class="kw">names</span>(v)</a>
<a class="sourceLine" id="cb29-18" title="18"><span class="co">## [1] &quot;a&quot; &quot;b&quot; &quot;c&quot; &quot;d&quot; &quot;e&quot; &quot;f&quot; &quot;g&quot; &quot;h&quot; &quot;i&quot;</span></a>
<a class="sourceLine" id="cb29-19" title="19"><span class="kw">rownames</span>(m); <span class="kw">colnames</span>(m)</a>
<a class="sourceLine" id="cb29-20" title="20"><span class="co">## [1] &quot;a&quot; &quot;b&quot; &quot;c&quot;</span></a>
<a class="sourceLine" id="cb29-21" title="21"><span class="co">## [1] &quot;a&quot; &quot;b&quot; &quot;c&quot;</span></a>
<a class="sourceLine" id="cb29-22" title="22"><span class="kw">dimnames</span>(a)</a>
<a class="sourceLine" id="cb29-23" title="23"><span class="co">## [[1]]</span></a>
<a class="sourceLine" id="cb29-24" title="24"><span class="co">## [1] &quot;a&quot; &quot;b&quot; &quot;c&quot;</span></a>
<a class="sourceLine" id="cb29-25" title="25"><span class="co">## </span></a>
<a class="sourceLine" id="cb29-26" title="26"><span class="co">## [[2]]</span></a>
<a class="sourceLine" id="cb29-27" title="27"><span class="co">## [1] &quot;a&quot; &quot;b&quot; &quot;c&quot;</span></a>
<a class="sourceLine" id="cb29-28" title="28"></a>
<a class="sourceLine" id="cb29-29" title="29"><span class="co"># Lengths</span></a>
<a class="sourceLine" id="cb29-30" title="30"></a>
<a class="sourceLine" id="cb29-31" title="31"><span class="kw">length</span>(v)</a>
<a class="sourceLine" id="cb29-32" title="32"><span class="co">## [1] 9</span></a>
<a class="sourceLine" id="cb29-33" title="33"><span class="kw">nrow</span>(m);<span class="kw">ncol</span>(m)</a>
<a class="sourceLine" id="cb29-34" title="34"><span class="co">## [1] 3</span></a>
<a class="sourceLine" id="cb29-35" title="35"><span class="co">## [1] 3</span></a>
<a class="sourceLine" id="cb29-36" title="36"><span class="kw">dim</span>(a)</a>
<a class="sourceLine" id="cb29-37" title="37"><span class="co">## [1] 3 3</span></a>
<a class="sourceLine" id="cb29-38" title="38"></a>
<a class="sourceLine" id="cb29-39" title="39"><span class="co"># Combine</span></a>
<a class="sourceLine" id="cb29-40" title="40"></a>
<a class="sourceLine" id="cb29-41" title="41"><span class="kw">c</span>(v, <span class="kw">c</span>(<span class="dt">j=</span><span class="dv">10</span>))</a>
<a class="sourceLine" id="cb29-42" title="42"><span class="co">##  a  b  c  d  e  f  g  h  i  j </span></a>
<a class="sourceLine" id="cb29-43" title="43"><span class="co">##  1  2  3  4  5  6  7  8  9 10</span></a>
<a class="sourceLine" id="cb29-44" title="44"><span class="kw">rbind</span>(m, <span class="dv">10</span><span class="op">:</span><span class="dv">12</span>);<span class="kw">cbind</span>(m, <span class="dv">10</span><span class="op">:</span><span class="dv">12</span>)</a>
<a class="sourceLine" id="cb29-45" title="45"><span class="co">##    a  b  c</span></a>
<a class="sourceLine" id="cb29-46" title="46"><span class="co">## a  1  4  7</span></a>
<a class="sourceLine" id="cb29-47" title="47"><span class="co">## b  2  5  8</span></a>
<a class="sourceLine" id="cb29-48" title="48"><span class="co">## c  3  6  9</span></a>
<a class="sourceLine" id="cb29-49" title="49"><span class="co">##   10 11 12</span></a>
<a class="sourceLine" id="cb29-50" title="50"><span class="co">##   a b c   </span></a>
<a class="sourceLine" id="cb29-51" title="51"><span class="co">## a 1 4 7 10</span></a>
<a class="sourceLine" id="cb29-52" title="52"><span class="co">## b 2 5 8 11</span></a>
<a class="sourceLine" id="cb29-53" title="53"><span class="co">## c 3 6 9 12</span></a>
<a class="sourceLine" id="cb29-54" title="54">abind<span class="op">::</span><span class="kw">abind</span>(a, <span class="dv">10</span><span class="op">:</span><span class="dv">12</span>, <span class="dt">along=</span><span class="dv">1</span>); abind<span class="op">::</span><span class="kw">abind</span>(a, <span class="dv">10</span><span class="op">:</span><span class="dv">12</span>, <span class="dt">along=</span><span class="dv">2</span>)</a>
<a class="sourceLine" id="cb29-55" title="55"><span class="co">##    a  b  c</span></a>
<a class="sourceLine" id="cb29-56" title="56"><span class="co">## a  1  4  7</span></a>
<a class="sourceLine" id="cb29-57" title="57"><span class="co">## b  2  5  8</span></a>
<a class="sourceLine" id="cb29-58" title="58"><span class="co">## c  3  6  9</span></a>
<a class="sourceLine" id="cb29-59" title="59"><span class="co">##   10 11 12</span></a>
<a class="sourceLine" id="cb29-60" title="60"><span class="co">##   a b c   </span></a>
<a class="sourceLine" id="cb29-61" title="61"><span class="co">## a 1 4 7 10</span></a>
<a class="sourceLine" id="cb29-62" title="62"><span class="co">## b 2 5 8 11</span></a>
<a class="sourceLine" id="cb29-63" title="63"><span class="co">## c 3 6 9 12</span></a>
<a class="sourceLine" id="cb29-64" title="64"></a>
<a class="sourceLine" id="cb29-65" title="65"><span class="co"># Transpose</span></a>
<a class="sourceLine" id="cb29-66" title="66"></a>
<a class="sourceLine" id="cb29-67" title="67"><span class="kw">t</span>(m)</a>
<a class="sourceLine" id="cb29-68" title="68"><span class="co">##   a b c</span></a>
<a class="sourceLine" id="cb29-69" title="69"><span class="co">## a 1 2 3</span></a>
<a class="sourceLine" id="cb29-70" title="70"><span class="co">## b 4 5 6</span></a>
<a class="sourceLine" id="cb29-71" title="71"><span class="co">## c 7 8 9</span></a>
<a class="sourceLine" id="cb29-72" title="72"><span class="kw">aperm</span>(a)</a>
<a class="sourceLine" id="cb29-73" title="73"><span class="co">##   a b c</span></a>
<a class="sourceLine" id="cb29-74" title="74"><span class="co">## a 1 2 3</span></a>
<a class="sourceLine" id="cb29-75" title="75"><span class="co">## b 4 5 6</span></a>
<a class="sourceLine" id="cb29-76" title="76"><span class="co">## c 7 8 9</span></a>
<a class="sourceLine" id="cb29-77" title="77"></a>
<a class="sourceLine" id="cb29-78" title="78"><span class="co"># Type test</span></a>
<a class="sourceLine" id="cb29-79" title="79"></a>
<a class="sourceLine" id="cb29-80" title="80"><span class="kw">is.vector</span>(v, <span class="dt">mode=</span><span class="st">&#39;any&#39;</span>)</a>
<a class="sourceLine" id="cb29-81" title="81"><span class="co">## [1] TRUE</span></a>
<a class="sourceLine" id="cb29-82" title="82"><span class="kw">is.matrix</span>(m)</a>
<a class="sourceLine" id="cb29-83" title="83"><span class="co">## [1] TRUE</span></a>
<a class="sourceLine" id="cb29-84" title="84"><span class="kw">is.array</span>(a)</a>
<a class="sourceLine" id="cb29-85" title="85"><span class="co">## [1] TRUE</span></a></code></pre></div>
<p>Vectors may have different dimensions. They may print similar but will behave differently. Pay
attention to [] syntax:</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb30-1" title="1"><span class="co"># 1d vector</span></a>
<a class="sourceLine" id="cb30-2" title="2"><span class="kw">str</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>)</a>
<a class="sourceLine" id="cb30-3" title="3"><span class="co">##  int [1:10] 1 2 3 4 5 6 7 8 9 10</span></a>
<a class="sourceLine" id="cb30-4" title="4"></a>
<a class="sourceLine" id="cb30-5" title="5"><span class="co"># column vector</span></a>
<a class="sourceLine" id="cb30-6" title="6"><span class="kw">str</span>(<span class="kw">matrix</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>, <span class="dt">ncol =</span> <span class="dv">1</span>))</a>
<a class="sourceLine" id="cb30-7" title="7"><span class="co">##  int [1:10, 1] 1 2 3 4 5 6 7 8 9 10</span></a>
<a class="sourceLine" id="cb30-8" title="8"></a>
<a class="sourceLine" id="cb30-9" title="9"><span class="co"># row vector</span></a>
<a class="sourceLine" id="cb30-10" title="10"><span class="kw">str</span>(<span class="kw">matrix</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>, <span class="dt">nrow =</span> <span class="dv">1</span>))</a>
<a class="sourceLine" id="cb30-11" title="11"><span class="co">##  int [1, 1:10] 1 2 3 4 5 6 7 8 9 10</span></a>
<a class="sourceLine" id="cb30-12" title="12"></a>
<a class="sourceLine" id="cb30-13" title="13"><span class="co"># 1d &quot;array&quot; vector</span></a>
<a class="sourceLine" id="cb30-14" title="14"><span class="kw">str</span>(<span class="kw">array</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>, <span class="dv">10</span>))</a>
<a class="sourceLine" id="cb30-15" title="15"><span class="co">##  int [1:10(1d)] 1 2 3 4 5 6 7 8 9 10</span></a></code></pre></div>
</div>
</div>
<div id="s3-atomic-vectors" class="section level4 unnumbered">
<h4>S3 Atomic Vectors</h4>
<p>The attribute <code>class</code> is what makes an object part of the S3 object system in R, and
changes how generic functions behave compared to regular vectors. S3 objects are built
on top of atomic vectors.</p>
<div id="factors" class="section level5 unnumbered">
<h5>Factors</h5>
<p>Factors are a ubiquitous S3 object in base R. They handle categorical variables where the
vector must contain only known values.</p>
<p>Factors are built on atomic vectors of type <code>integer</code>, and only have two attributes: <code>class</code> “factor” and <code>levels</code>, which defines the set, and sometimes order, of possible values.</p>
<p>Use <code>factor()</code> create a factor:</p>
<ul>
<li><em>x</em>: a vector coercible to <code>character</code></li>
<li><em>levels</em>: a unique vector of <em>expected</em> values in x; which can contain values not found in x or, conversly, exclude values found in x</li>
<li><em>labels</em>: a vector of name <em>aliases</em> for levels (in the same order as levels) or scalar</li>
</ul>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb31-1" title="1"><span class="co"># create a factor from a vector of state abbreviations</span></a>
<a class="sourceLine" id="cb31-2" title="2"><span class="co"># tell R to expect values MO, NY, AK, HI and their aliases are Missouri, New York, Alaska, </span></a>
<a class="sourceLine" id="cb31-3" title="3"><span class="co"># &amp; Hawaii</span></a>
<a class="sourceLine" id="cb31-4" title="4">states &lt;-<span class="st"> </span><span class="kw">factor</span>(<span class="dt">x =</span> <span class="kw">c</span>(<span class="st">&#39;MO&#39;</span>,<span class="st">&#39;NY&#39;</span>,<span class="st">&#39;AK&#39;</span>,<span class="st">&#39;MO&#39;</span>,<span class="st">&#39;AK&#39;</span>,<span class="st">&#39;IL&#39;</span>),</a>
<a class="sourceLine" id="cb31-5" title="5">                 <span class="dt">levels =</span> <span class="kw">c</span>(<span class="st">&#39;MO&#39;</span>,<span class="st">&#39;NY&#39;</span>,<span class="st">&#39;AK&#39;</span>,<span class="st">&#39;HI&#39;</span>),</a>
<a class="sourceLine" id="cb31-6" title="6">                 <span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">&#39;Missouri&#39;</span>,<span class="st">&#39;New York&#39;</span>,<span class="st">&#39;Alaska&#39;</span>,<span class="st">&#39;Hawaii&#39;</span>))</a>
<a class="sourceLine" id="cb31-7" title="7"></a>
<a class="sourceLine" id="cb31-8" title="8"><span class="co"># factor() converts the vector to integer values under-the-hood. These are rarely visible </span></a>
<a class="sourceLine" id="cb31-9" title="9"><span class="co"># but can be exposed using c() (or unclass() but then you no longer have a factor). The </span></a>
<a class="sourceLine" id="cb31-10" title="10"><span class="co"># integer refers to the sequence of levels given, starting with &#39;MO&#39; in this case.</span></a>
<a class="sourceLine" id="cb31-11" title="11"><span class="kw">str</span>(<span class="kw">c</span>(states))</a>
<a class="sourceLine" id="cb31-12" title="12"><span class="co">##  int [1:6] 1 2 3 1 3 NA</span></a>
<a class="sourceLine" id="cb31-13" title="13"></a>
<a class="sourceLine" id="cb31-14" title="14"><span class="co"># usually factors print their levels attribute</span></a>
<a class="sourceLine" id="cb31-15" title="15">states</a>
<a class="sourceLine" id="cb31-16" title="16"><span class="co">## [1] Missouri New York Alaska   Missouri Alaska   &lt;NA&gt;    </span></a>
<a class="sourceLine" id="cb31-17" title="17"><span class="co">## Levels: Missouri New York Alaska Hawaii</span></a>
<a class="sourceLine" id="cb31-18" title="18"><span class="co"># notice it did not print the levels given in factor(), but rather the label aliases </span></a>
<a class="sourceLine" id="cb31-19" title="19"><span class="co"># were given to attribute `levels`. If no labels argument is given it defaults to same</span></a>
<a class="sourceLine" id="cb31-20" title="20"><span class="co"># as levels.</span></a>
<a class="sourceLine" id="cb31-21" title="21"><span class="kw">attributes</span>(states)</a>
<a class="sourceLine" id="cb31-22" title="22"><span class="co">## $levels</span></a>
<a class="sourceLine" id="cb31-23" title="23"><span class="co">## [1] &quot;Missouri&quot; &quot;New York&quot; &quot;Alaska&quot;   &quot;Hawaii&quot;  </span></a>
<a class="sourceLine" id="cb31-24" title="24"><span class="co">## </span></a>
<a class="sourceLine" id="cb31-25" title="25"><span class="co">## $class</span></a>
<a class="sourceLine" id="cb31-26" title="26"><span class="co">## [1] &quot;factor&quot;</span></a>
<a class="sourceLine" id="cb31-27" title="27"></a>
<a class="sourceLine" id="cb31-28" title="28"><span class="co"># if no levels argument was given, factor() would have defaulted to the unique set of values </span></a>
<a class="sourceLine" id="cb31-29" title="29"><span class="co"># in x in ascending order. Note this would include Illinois (which we originally excluded and</span></a>
<a class="sourceLine" id="cb31-30" title="30"><span class="co"># values in states became `NA`), and would have excluded Hawaii (which we may have wanted</span></a>
<a class="sourceLine" id="cb31-31" title="31"><span class="co"># even though it is not in the current vector x).</span></a>
<a class="sourceLine" id="cb31-32" title="32"><span class="kw">sort</span>(<span class="kw">unique</span>(<span class="kw">as.character</span>(<span class="kw">c</span>(<span class="st">&#39;MO&#39;</span>,<span class="st">&#39;NY&#39;</span>,<span class="st">&#39;AK&#39;</span>,<span class="st">&#39;MO&#39;</span>,<span class="st">&#39;AK&#39;</span>,<span class="st">&#39;IL&#39;</span>))))</a>
<a class="sourceLine" id="cb31-33" title="33"><span class="co">## [1] &quot;AK&quot; &quot;IL&quot; &quot;MO&quot; &quot;NY&quot;</span></a>
<a class="sourceLine" id="cb31-34" title="34"></a>
<a class="sourceLine" id="cb31-35" title="35"><span class="co"># notice tabulated results appear in level order and include counts even for values not</span></a>
<a class="sourceLine" id="cb31-36" title="36"><span class="co"># present in states</span></a>
<a class="sourceLine" id="cb31-37" title="37"><span class="kw">table</span>(states)</a>
<a class="sourceLine" id="cb31-38" title="38"><span class="co">## states</span></a>
<a class="sourceLine" id="cb31-39" title="39"><span class="co">## Missouri New York   Alaska   Hawaii </span></a>
<a class="sourceLine" id="cb31-40" title="40"><span class="co">##        2        1        2        0</span></a>
<a class="sourceLine" id="cb31-41" title="41"></a>
<a class="sourceLine" id="cb31-42" title="42"><span class="co"># many base R functions convert character vectors to factor by default. This may not be </span></a>
<a class="sourceLine" id="cb31-43" title="43"><span class="co"># desirable as the vector may not contain the complete set of values, or infer their</span></a>
<a class="sourceLine" id="cb31-44" title="44"><span class="co"># correct order.</span></a>
<a class="sourceLine" id="cb31-45" title="45"><span class="kw">class</span>(<span class="kw">data.frame</span>(<span class="dt">x=</span><span class="kw">c</span>(<span class="st">&#39;red&#39;</span>,<span class="st">&#39;yellow&#39;</span>,<span class="st">&#39;blue&#39;</span>))[[<span class="dv">1</span>]])</a>
<a class="sourceLine" id="cb31-46" title="46"><span class="co">## [1] &quot;factor&quot;</span></a>
<a class="sourceLine" id="cb31-47" title="47"></a>
<a class="sourceLine" id="cb31-48" title="48"><span class="co"># use arguement stringsAsFactor to inhibit default factor creation</span></a>
<a class="sourceLine" id="cb31-49" title="49"><span class="kw">class</span>(<span class="kw">data.frame</span>(<span class="dt">x=</span><span class="kw">c</span>(<span class="st">&#39;red&#39;</span>,<span class="st">&#39;yellow&#39;</span>,<span class="st">&#39;blue&#39;</span>),</a>
<a class="sourceLine" id="cb31-50" title="50">                 <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>)[[<span class="dv">1</span>]])</a>
<a class="sourceLine" id="cb31-51" title="51"><span class="co">## [1] &quot;character&quot;</span></a></code></pre></div>
<p>Some categorical variables have order. Methods and modeling functions usually
treat ordered and unordered factors very differently. Use <code>ordered()</code> to create an
object of <code>class</code> “ordered factor”, where the order in levels implies the order
between factor levels.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb32-1" title="1">priority &lt;-<span class="st"> </span><span class="kw">ordered</span>(<span class="dt">x =</span> <span class="kw">c</span>(<span class="st">&#39;low&#39;</span>,<span class="st">&#39;medium&#39;</span>,<span class="st">&#39;high&#39;</span>),</a>
<a class="sourceLine" id="cb32-2" title="2">                    <span class="dt">levels =</span> <span class="kw">c</span>(<span class="st">&#39;low&#39;</span>,<span class="st">&#39;medium&#39;</span>,<span class="st">&#39;high&#39;</span>))</a>
<a class="sourceLine" id="cb32-3" title="3"></a>
<a class="sourceLine" id="cb32-4" title="4"><span class="kw">str</span>(priority)</a>
<a class="sourceLine" id="cb32-5" title="5"><span class="co">##  Ord.factor w/ 3 levels &quot;low&quot;&lt;&quot;medium&quot;&lt;..: 1 2 3</span></a></code></pre></div>
<p>Finally, some functions coerce factors into strings (e.g. <code>grepl()</code>) while others
(e.g. <code>c()</code>) return the integer substrate. If you want string-like behavior, best to
coerce <code>as.character()</code> before performing string operations.</p>
</div>
<div id="dates" class="section level5 unnumbered">
<h5>Dates</h5>
<p>Date vectors are S3 objects built on type <code>double</code>, and have only attribute: <code>class</code> “Date”. They
represent days from the <a href="https://en.wikipedia.org/wiki/Unix_time">UNIX Epoch</a>, 01-Jan-1970; and take
into account leap-days, but not leap-seconds.</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb33-1" title="1"><span class="co"># today&#39;s date</span></a>
<a class="sourceLine" id="cb33-2" title="2">today &lt;-<span class="st"> </span><span class="kw">Sys.Date</span>()</a>
<a class="sourceLine" id="cb33-3" title="3"><span class="kw">typeof</span>(today)</a>
<a class="sourceLine" id="cb33-4" title="4"><span class="co">## [1] &quot;double&quot;</span></a>
<a class="sourceLine" id="cb33-5" title="5"><span class="kw">class</span>(today)</a>
<a class="sourceLine" id="cb33-6" title="6"><span class="co">## [1] &quot;Date&quot;</span></a>
<a class="sourceLine" id="cb33-7" title="7"><span class="co"># unclass the Date object to see the underlying double</span></a>
<a class="sourceLine" id="cb33-8" title="8"><span class="kw">unclass</span>(today)</a>
<a class="sourceLine" id="cb33-9" title="9"><span class="co">## [1] 18382</span></a></code></pre></div>
</div>
<div id="date-times" class="section level5 unnumbered">
<h5>Date-times</h5>
<p>S3 Date-times come in two flavors: POSIX<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a>ct <em>(calendar time)</em> &amp; POSIXlt <em>(local time)</em>. POSIXct is build on type <code>double</code> whereas POSIXlt is type <code>list</code>,
which we’ll discuss later.</p>
<p>POSIXct represents the number of seconds since the UNIX Epoch, 01-JAN-1970, and
has the attributes <code>class</code> &amp; <code>tzone</code>. Pass the <code>tz</code> argument a <a href="https://en.wikipedia.org/wiki/List_of_tz_database_time_zones">tz database</a> time zone
to change attribute <code>tzone</code> from the default local time. This does not change the underlying
<code>double</code>, only how it prints.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb34-1" title="1">ct &lt;-<span class="st"> </span><span class="kw">as.POSIXct</span>(<span class="dt">x =</span> <span class="st">&quot;2020-04-28 05:00:00&quot;</span>, <span class="dt">tz=</span><span class="st">&#39;UTC&#39;</span>)</a>
<a class="sourceLine" id="cb34-2" title="2"><span class="co"># the calendar time object</span></a>
<a class="sourceLine" id="cb34-3" title="3">ct</a>
<a class="sourceLine" id="cb34-4" title="4"><span class="co">## [1] &quot;2020-04-28 05:00:00 UTC&quot;</span></a>
<a class="sourceLine" id="cb34-5" title="5"></a>
<a class="sourceLine" id="cb34-6" title="6"><span class="co"># built on doubles</span></a>
<a class="sourceLine" id="cb34-7" title="7"><span class="kw">typeof</span>(ct)</a>
<a class="sourceLine" id="cb34-8" title="8"><span class="co">## [1] &quot;double&quot;</span></a>
<a class="sourceLine" id="cb34-9" title="9"><span class="co"># has attributes class and tzone</span></a>
<a class="sourceLine" id="cb34-10" title="10"><span class="kw">attributes</span>(ct)</a>
<a class="sourceLine" id="cb34-11" title="11"><span class="co">## $class</span></a>
<a class="sourceLine" id="cb34-12" title="12"><span class="co">## [1] &quot;POSIXct&quot; &quot;POSIXt&quot; </span></a>
<a class="sourceLine" id="cb34-13" title="13"><span class="co">## </span></a>
<a class="sourceLine" id="cb34-14" title="14"><span class="co">## $tzone</span></a>
<a class="sourceLine" id="cb34-15" title="15"><span class="co">## [1] &quot;UTC&quot;</span></a>
<a class="sourceLine" id="cb34-16" title="16"></a>
<a class="sourceLine" id="cb34-17" title="17"><span class="co"># change tzone attribute to EDT, CDT, JST; notice midnight does not print a time</span></a>
<a class="sourceLine" id="cb34-18" title="18"><span class="kw">attr</span>(ct, <span class="dt">which =</span> <span class="st">&#39;tzone&#39;</span>) &lt;-<span class="st"> &#39;America/New_York&#39;</span>; ct;</a>
<a class="sourceLine" id="cb34-19" title="19"><span class="co">## [1] &quot;2020-04-28 01:00:00 EDT&quot;</span></a>
<a class="sourceLine" id="cb34-20" title="20"><span class="kw">attr</span>(ct, <span class="dt">which =</span> <span class="st">&#39;tzone&#39;</span>) &lt;-<span class="st"> &#39;America/Chicago&#39;</span>; ct</a>
<a class="sourceLine" id="cb34-21" title="21"><span class="co">## [1] &quot;2020-04-28 CDT&quot;</span></a>
<a class="sourceLine" id="cb34-22" title="22"><span class="kw">attr</span>(ct, <span class="dt">which =</span> <span class="st">&#39;tzone&#39;</span>) &lt;-<span class="st"> &#39;Asia/Tokyo&#39;</span>; ct</a>
<a class="sourceLine" id="cb34-23" title="23"><span class="co">## [1] &quot;2020-04-28 14:00:00 JST&quot;</span></a>
<a class="sourceLine" id="cb34-24" title="24"></a>
<a class="sourceLine" id="cb34-25" title="25"><span class="co"># the underlying double type atomic vector</span></a>
<a class="sourceLine" id="cb34-26" title="26"><span class="kw">unclass</span>(ct)[<span class="dv">1</span>]</a>
<a class="sourceLine" id="cb34-27" title="27"><span class="co">## [1] 1588050000</span></a></code></pre></div>
</div>
<div id="difftimes" class="section level5 unnumbered">
<h5>Difftimes</h5>
<p>Difftimes are <code>doubles</code> which represent a duration of time (interpreted by attribute <code>units</code>) between
two dates/datetimes. <code>units</code> includes “secs”, “mins”, “hours”, “days”, and “weeks” and are <em>not</em>
sensitive to daylight savings time.</p>
<p>Limited math methods and arithmetic is available for difftime. See <code>?difftime</code>.</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb35-1" title="1"><span class="co"># create difftime directly</span></a>
<a class="sourceLine" id="cb35-2" title="2">day &lt;-<span class="st"> </span><span class="kw">as.difftime</span>(<span class="dv">1</span>, <span class="dt">units =</span> <span class="st">&#39;days&#39;</span>)</a>
<a class="sourceLine" id="cb35-3" title="3">day</a>
<a class="sourceLine" id="cb35-4" title="4"><span class="co">## Time difference of 1 days</span></a>
<a class="sourceLine" id="cb35-5" title="5"><span class="co"># create difftime by arithmetic</span></a>
<a class="sourceLine" id="cb35-6" title="6">day_alt &lt;-<span class="st"> </span><span class="kw">as.Date</span>(<span class="st">&quot;2020-04-28&quot;</span>) <span class="op">-</span><span class="st"> </span><span class="kw">as.Date</span>(<span class="st">&quot;2020-04-27&quot;</span>)</a>
<a class="sourceLine" id="cb35-7" title="7">day_alt</a>
<a class="sourceLine" id="cb35-8" title="8"><span class="co">## Time difference of 1 days</span></a>
<a class="sourceLine" id="cb35-9" title="9"></a>
<a class="sourceLine" id="cb35-10" title="10"><span class="kw">typeof</span>(day)</a>
<a class="sourceLine" id="cb35-11" title="11"><span class="co">## [1] &quot;double&quot;</span></a>
<a class="sourceLine" id="cb35-12" title="12"><span class="kw">class</span>(day)</a>
<a class="sourceLine" id="cb35-13" title="13"><span class="co">## [1] &quot;difftime&quot;</span></a>
<a class="sourceLine" id="cb35-14" title="14"><span class="kw">attributes</span>(day)</a>
<a class="sourceLine" id="cb35-15" title="15"><span class="co">## $class</span></a>
<a class="sourceLine" id="cb35-16" title="16"><span class="co">## [1] &quot;difftime&quot;</span></a>
<a class="sourceLine" id="cb35-17" title="17"><span class="co">## </span></a>
<a class="sourceLine" id="cb35-18" title="18"><span class="co">## $units</span></a>
<a class="sourceLine" id="cb35-19" title="19"><span class="co">## [1] &quot;days&quot;</span></a>
<a class="sourceLine" id="cb35-20" title="20"><span class="co"># retrive/set units directly using units()</span></a>
<a class="sourceLine" id="cb35-21" title="21"><span class="kw">units</span>(day) &lt;-<span class="st"> &#39;hours&#39;</span></a>
<a class="sourceLine" id="cb35-22" title="22"><span class="co"># day is now a 24 hour timediff</span></a>
<a class="sourceLine" id="cb35-23" title="23">day</a>
<a class="sourceLine" id="cb35-24" title="24"><span class="co">## Time difference of 24 hours</span></a>
<a class="sourceLine" id="cb35-25" title="25"></a>
<a class="sourceLine" id="cb35-26" title="26"><span class="co"># add difftime to Date to return Date</span></a>
<a class="sourceLine" id="cb35-27" title="27"><span class="kw">as.Date</span>(<span class="st">&quot;2020-04-28&quot;</span>) <span class="op">+</span><span class="st"> </span>(<span class="dv">2</span><span class="op">*</span>day)</a>
<a class="sourceLine" id="cb35-28" title="28"><span class="co">## [1] &quot;2020-04-30&quot;</span></a>
<a class="sourceLine" id="cb35-29" title="29"></a>
<a class="sourceLine" id="cb35-30" title="30"><span class="co"># add difftime to difftime to return difftime</span></a>
<a class="sourceLine" id="cb35-31" title="31"><span class="kw">as.difftime</span>(.<span class="dv">5</span>, <span class="dt">units=</span><span class="st">&#39;mins&#39;</span>) <span class="op">+</span><span class="st"> </span><span class="kw">as.POSIXct</span>(<span class="st">&#39;2020-03-02 00:00:00&#39;</span>)</a>
<a class="sourceLine" id="cb35-32" title="32"><span class="co">## [1] &quot;2020-03-02 00:00:30 CST&quot;</span></a>
<a class="sourceLine" id="cb35-33" title="33"></a>
<a class="sourceLine" id="cb35-34" title="34"><span class="co"># transform difftime by numeric to return difftime</span></a>
<a class="sourceLine" id="cb35-35" title="35">day<span class="op">/</span><span class="dv">2</span></a>
<a class="sourceLine" id="cb35-36" title="36"><span class="co">## Time difference of 12 hours</span></a>
<a class="sourceLine" id="cb35-37" title="37"></a>
<a class="sourceLine" id="cb35-38" title="38"><span class="co"># transform difftime by difftime to return difftime</span></a>
<a class="sourceLine" id="cb35-39" title="39">day<span class="op">+</span>day</a>
<a class="sourceLine" id="cb35-40" title="40"><span class="co">## Time difference of 48 hours</span></a>
<a class="sourceLine" id="cb35-41" title="41"></a>
<a class="sourceLine" id="cb35-42" title="42"><span class="co"># math methods are to describe difftime vectors</span></a>
<a class="sourceLine" id="cb35-43" title="43"><span class="kw">mean</span>(<span class="kw">c</span>(<span class="kw">as.Date</span>(<span class="st">&quot;2020-04-28&quot;</span>) <span class="op">-</span><span class="st"> </span><span class="kw">as.Date</span>(<span class="st">&quot;2020-04-27&quot;</span>), </a>
<a class="sourceLine" id="cb35-44" title="44">       <span class="kw">as.Date</span>(<span class="st">&quot;2020-04-28&quot;</span>) <span class="op">-</span><span class="st"> </span><span class="kw">as.Date</span>(<span class="st">&quot;2020-04-26&quot;</span>)))</a>
<a class="sourceLine" id="cb35-45" title="45"><span class="co">## Time difference of 1.5 days</span></a>
<a class="sourceLine" id="cb35-46" title="46"></a>
<a class="sourceLine" id="cb35-47" title="47"><span class="co"># round difftime etc.</span></a>
<a class="sourceLine" id="cb35-48" title="48"><span class="kw">round</span>(day, <span class="dv">-1</span>)</a>
<a class="sourceLine" id="cb35-49" title="49"><span class="co">## Time difference of 20 hours</span></a>
<a class="sourceLine" id="cb35-50" title="50"></a>
<a class="sourceLine" id="cb35-51" title="51"><span class="co"># the underlying double</span></a>
<a class="sourceLine" id="cb35-52" title="52"><span class="kw">unclass</span>(day)[<span class="dv">1</span>]</a>
<a class="sourceLine" id="cb35-53" title="53"><span class="co">## [1] 24</span></a></code></pre></div>
</div>
</div>
<div id="lists" class="section level4 unnumbered">
<h4>Lists</h4>
<p><a href="advanced-r.html#lobjects">Earlier</a> we learned lists are just vectors of references to objects of any
type. They have only attribute <code>class</code> “list”.</p>
<p>Lists are created with <code>list()</code>. Notice they can contain references to other list, and so
are called <em>recursive</em> vectors:</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb36-1" title="1">l &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dv">1</span>,</a>
<a class="sourceLine" id="cb36-2" title="2">          letters[<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>], </a>
<a class="sourceLine" id="cb36-3" title="3">          <span class="kw">c</span>(T,T,F,F), </a>
<a class="sourceLine" id="cb36-4" title="4">          <span class="kw">list</span>(<span class="dv">1</span>))</a>
<a class="sourceLine" id="cb36-5" title="5"></a>
<a class="sourceLine" id="cb36-6" title="6"><span class="kw">str</span>(l)</a>
<a class="sourceLine" id="cb36-7" title="7"><span class="co">## List of 4</span></a>
<a class="sourceLine" id="cb36-8" title="8"><span class="co">##  $ : num 1</span></a>
<a class="sourceLine" id="cb36-9" title="9"><span class="co">##  $ : chr [1:10] &quot;a&quot; &quot;b&quot; &quot;c&quot; &quot;d&quot; ...</span></a>
<a class="sourceLine" id="cb36-10" title="10"><span class="co">##  $ : logi [1:4] TRUE TRUE FALSE FALSE</span></a>
<a class="sourceLine" id="cb36-11" title="11"><span class="co">##  $ :List of 1</span></a>
<a class="sourceLine" id="cb36-12" title="12"><span class="co">##   ..$ : num 1</span></a></code></pre></div>
<p><code>c()</code> will convert vectors into lists before combining them:</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb37-1" title="1"><span class="kw">c</span>(<span class="kw">list</span>(letters[<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>]), <span class="dv">1</span><span class="op">:</span><span class="dv">3</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">str</span>()</a>
<a class="sourceLine" id="cb37-2" title="2"><span class="co">## List of 4</span></a>
<a class="sourceLine" id="cb37-3" title="3"><span class="co">##  $ : chr [1:3] &quot;a&quot; &quot;b&quot; &quot;c&quot;</span></a>
<a class="sourceLine" id="cb37-4" title="4"><span class="co">##  $ : int 1</span></a>
<a class="sourceLine" id="cb37-5" title="5"><span class="co">##  $ : int 2</span></a>
<a class="sourceLine" id="cb37-6" title="6"><span class="co">##  $ : int 3</span></a></code></pre></div>
<div id="testing-and-coercing-lists" class="section level5 unnumbered">
<h5>Testing and coercing lists</h5>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb38-1" title="1"><span class="co"># test for list type</span></a>
<a class="sourceLine" id="cb38-2" title="2"><span class="kw">is.list</span>(l)</a>
<a class="sourceLine" id="cb38-3" title="3"><span class="co">## [1] TRUE</span></a>
<a class="sourceLine" id="cb38-4" title="4"><span class="kw">typeof</span>(l)</a>
<a class="sourceLine" id="cb38-5" title="5"><span class="co">## [1] &quot;list&quot;</span></a>
<a class="sourceLine" id="cb38-6" title="6"></a>
<a class="sourceLine" id="cb38-7" title="7"><span class="co"># already seen list(), but as.list() exists as well</span></a>
<a class="sourceLine" id="cb38-8" title="8"><span class="kw">as.list</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">4</span>)</a>
<a class="sourceLine" id="cb38-9" title="9"><span class="co">## [[1]]</span></a>
<a class="sourceLine" id="cb38-10" title="10"><span class="co">## [1] 1</span></a>
<a class="sourceLine" id="cb38-11" title="11"><span class="co">## </span></a>
<a class="sourceLine" id="cb38-12" title="12"><span class="co">## [[2]]</span></a>
<a class="sourceLine" id="cb38-13" title="13"><span class="co">## [1] 2</span></a>
<a class="sourceLine" id="cb38-14" title="14"><span class="co">## </span></a>
<a class="sourceLine" id="cb38-15" title="15"><span class="co">## [[3]]</span></a>
<a class="sourceLine" id="cb38-16" title="16"><span class="co">## [1] 3</span></a>
<a class="sourceLine" id="cb38-17" title="17"><span class="co">## </span></a>
<a class="sourceLine" id="cb38-18" title="18"><span class="co">## [[4]]</span></a>
<a class="sourceLine" id="cb38-19" title="19"><span class="co">## [1] 4</span></a>
<a class="sourceLine" id="cb38-20" title="20"></a>
<a class="sourceLine" id="cb38-21" title="21"><span class="co"># to coerce list to vector</span></a>
<a class="sourceLine" id="cb38-22" title="22"><span class="kw">unlist</span>(l)</a>
<a class="sourceLine" id="cb38-23" title="23"><span class="co">##  [1] &quot;1&quot;     &quot;a&quot;     &quot;b&quot;     &quot;c&quot;     &quot;d&quot;     &quot;e&quot;     &quot;f&quot;     &quot;g&quot;    </span></a>
<a class="sourceLine" id="cb38-24" title="24"><span class="co">##  [9] &quot;h&quot;     &quot;i&quot;     &quot;j&quot;     &quot;TRUE&quot;  &quot;TRUE&quot;  &quot;FALSE&quot; &quot;FALSE&quot; &quot;1&quot;</span></a></code></pre></div>
</div>
</div>
<div id="data-frames-and-tibbles" class="section level4 unnumbered">
<h4>Data frames and tibbles</h4>
<p>Data frames are the most important data structure for data analysis in R. They are
built on top of lists with attributes <code>class</code> “data.frame”, “names” <em>(for columns)</em>,
and “row.names”; and, crucially, requires each element be a vector of equal length.</p>
<p>Tibbles are data frames that were later developed as part of the <a href="https://www.tidyverse.org/">Tidyverse</a>. They try and optimize the default
behavior of <code>class</code> data.frame in the following ways.</p>
<div id="creating-data.frame-or-tbl_df" class="section level5 unnumbered">
<h5>Creating data.frame or tbl_df</h5>
<p><code>data.frame()</code> creates a data frame object from … name = vector pairs:</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb39-1" title="1"><span class="co"># create character vector and add names attribute &#39;Color&#39;</span></a>
<a class="sourceLine" id="cb39-2" title="2">color &lt;-<span class="st"> </span><span class="kw">rep</span>(<span class="dt">x =</span> <span class="kw">c</span>(<span class="st">&#39;red&#39;</span>,<span class="st">&#39;blue&#39;</span>,<span class="st">&#39;yellow&#39;</span>), <span class="dt">times =</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb39-3" title="3"><span class="kw">names</span>(color) &lt;-<span class="st"> &#39;Color&#39;</span></a>
<a class="sourceLine" id="cb39-4" title="4"></a>
<a class="sourceLine" id="cb39-5" title="5">df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">sock_id =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">6</span>, <span class="co"># use name = vector pairs</span></a>
<a class="sourceLine" id="cb39-6" title="6">                 color, <span class="co"># or vectors with attribute &quot;names&quot;</span></a>
<a class="sourceLine" id="cb39-7" title="7">                 <span class="dv">6</span><span class="op">:</span><span class="dv">1</span>, <span class="co"># or let R use defaults</span></a>
<a class="sourceLine" id="cb39-8" title="8">                 <span class="st">`</span><span class="dt">1</span><span class="st">`</span> =<span class="st"> </span><span class="dv">1</span> <span class="co"># but non-syntactic names will be renamed without warning</span></a>
<a class="sourceLine" id="cb39-9" title="9">                 ) </a>
<a class="sourceLine" id="cb39-10" title="10"></a>
<a class="sourceLine" id="cb39-11" title="11"><span class="kw">typeof</span>(df)</a>
<a class="sourceLine" id="cb39-12" title="12"><span class="co">## [1] &quot;list&quot;</span></a>
<a class="sourceLine" id="cb39-13" title="13"><span class="kw">str</span>(df)</a>
<a class="sourceLine" id="cb39-14" title="14"><span class="co">## &#39;data.frame&#39;:    6 obs. of  4 variables:</span></a>
<a class="sourceLine" id="cb39-15" title="15"><span class="co">##  $ sock_id: int  1 2 3 4 5 6</span></a>
<a class="sourceLine" id="cb39-16" title="16"><span class="co">##  $ color  : Factor w/ 3 levels &quot;blue&quot;,&quot;red&quot;,&quot;yellow&quot;: 2 1 3 2 1 3</span></a>
<a class="sourceLine" id="cb39-17" title="17"><span class="co">##  $ X6.1   : int  6 5 4 3 2 1</span></a>
<a class="sourceLine" id="cb39-18" title="18"><span class="co">##  $ X1     : num  1 1 1 1 1 1</span></a></code></pre></div>
<p>Notice data.frame automatically creates factors from <code>character</code> vectors. Inhibit
with <code>stringsAsFactors</code> arguement:</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb40-1" title="1"><span class="kw">data.frame</span>(letters[<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>],</a>
<a class="sourceLine" id="cb40-2" title="2">           <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">str</span>()</a>
<a class="sourceLine" id="cb40-3" title="3"><span class="co">## &#39;data.frame&#39;:    3 obs. of  1 variable:</span></a>
<a class="sourceLine" id="cb40-4" title="4"><span class="co">##  $ letters.1.3.: chr  &quot;a&quot; &quot;b&quot; &quot;c&quot;</span></a></code></pre></div>
<p>Like lists and matrices, data frames and tibbles have row and column names and dimensional length:</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb41-1" title="1"><span class="co"># column names</span></a>
<a class="sourceLine" id="cb41-2" title="2"><span class="kw">names</span>(df); <span class="kw">colnames</span>(df)</a>
<a class="sourceLine" id="cb41-3" title="3"><span class="co">## [1] &quot;sock_id&quot; &quot;color&quot;   &quot;X6.1&quot;    &quot;X1&quot;</span></a>
<a class="sourceLine" id="cb41-4" title="4"><span class="co">## [1] &quot;sock_id&quot; &quot;color&quot;   &quot;X6.1&quot;    &quot;X1&quot;</span></a>
<a class="sourceLine" id="cb41-5" title="5"></a>
<a class="sourceLine" id="cb41-6" title="6"><span class="co"># column length</span></a>
<a class="sourceLine" id="cb41-7" title="7"><span class="kw">length</span>(df); <span class="kw">ncol</span>(df)</a>
<a class="sourceLine" id="cb41-8" title="8"><span class="co">## [1] 4</span></a>
<a class="sourceLine" id="cb41-9" title="9"><span class="co">## [1] 4</span></a>
<a class="sourceLine" id="cb41-10" title="10"></a>
<a class="sourceLine" id="cb41-11" title="11"><span class="co"># row names</span></a>
<a class="sourceLine" id="cb41-12" title="12"><span class="kw">rownames</span>(df)</a>
<a class="sourceLine" id="cb41-13" title="13"><span class="co">## [1] &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;4&quot; &quot;5&quot; &quot;6&quot;</span></a>
<a class="sourceLine" id="cb41-14" title="14"></a>
<a class="sourceLine" id="cb41-15" title="15"><span class="co"># row length</span></a>
<a class="sourceLine" id="cb41-16" title="16"><span class="kw">nrow</span>(df)</a>
<a class="sourceLine" id="cb41-17" title="17"><span class="co">## [1] 6</span></a>
<a class="sourceLine" id="cb41-18" title="18"></a>
<a class="sourceLine" id="cb41-19" title="19"><span class="co"># row and column dimensions</span></a>
<a class="sourceLine" id="cb41-20" title="20"><span class="kw">dim</span>(df)</a>
<a class="sourceLine" id="cb41-21" title="21"><span class="co">## [1] 6 4</span></a></code></pre></div>
<p>Tibbles have <code>class</code> “tbl_df” (as well as data.frame) which modifies their behavior. They
are created similarly to data frames:</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb42-1" title="1"><span class="kw">library</span>(tibble)</a>
<a class="sourceLine" id="cb42-2" title="2"></a>
<a class="sourceLine" id="cb42-3" title="3">tbl &lt;-<span class="st"> </span><span class="kw">tibble</span>(<span class="dt">sock_id =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">6</span>, <span class="co"># use name = vector pairs</span></a>
<a class="sourceLine" id="cb42-4" title="4">                 color, <span class="co"># or vectors with attribute &quot;names&quot;</span></a>
<a class="sourceLine" id="cb42-5" title="5">                 <span class="dv">6</span><span class="op">:</span><span class="dv">1</span>, <span class="co"># or let R use defaults</span></a>
<a class="sourceLine" id="cb42-6" title="6">                 <span class="st">`</span><span class="dt">1</span><span class="st">`</span> =<span class="st"> </span><span class="dv">1</span>, <span class="co"># allows non-syntactic names</span></a>
<a class="sourceLine" id="cb42-7" title="7">                 <span class="st">`</span><span class="dt">1*2</span><span class="st">`</span> =<span class="st"> `</span><span class="dt">1</span><span class="st">`</span> <span class="op">*</span><span class="st"> </span><span class="dv">2</span> <span class="co"># allows reference to new variables</span></a>
<a class="sourceLine" id="cb42-8" title="8">              )</a>
<a class="sourceLine" id="cb42-9" title="9"></a>
<a class="sourceLine" id="cb42-10" title="10"><span class="kw">typeof</span>(tbl)</a>
<a class="sourceLine" id="cb42-11" title="11"><span class="co">## [1] &quot;list&quot;</span></a>
<a class="sourceLine" id="cb42-12" title="12"><span class="kw">str</span>(tbl)</a>
<a class="sourceLine" id="cb42-13" title="13"><span class="co">## Classes &#39;tbl_df&#39;, &#39;tbl&#39; and &#39;data.frame&#39;:    6 obs. of  5 variables:</span></a>
<a class="sourceLine" id="cb42-14" title="14"><span class="co">##  $ sock_id: int  1 2 3 4 5 6</span></a>
<a class="sourceLine" id="cb42-15" title="15"><span class="co">##  $ color  : chr  &quot;red&quot; &quot;blue&quot; &quot;yellow&quot; &quot;red&quot; ...</span></a>
<a class="sourceLine" id="cb42-16" title="16"><span class="co">##  $ 6:1    : int  6 5 4 3 2 1</span></a>
<a class="sourceLine" id="cb42-17" title="17"><span class="co">##  $ 1      : num  1 1 1 1 1 1</span></a>
<a class="sourceLine" id="cb42-18" title="18"><span class="co">##  $ 1*2    : num  2 2 2 2 2 2</span></a></code></pre></div>
<p>Tibbles can use the same methods as data tables, for example names and dimensional length:</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb43-1" title="1"><span class="kw">colnames</span>(tbl); <span class="kw">ncol</span>(tbl)</a>
<a class="sourceLine" id="cb43-2" title="2"><span class="co">## [1] &quot;sock_id&quot; &quot;color&quot;   &quot;6:1&quot;     &quot;1&quot;       &quot;1*2&quot;</span></a>
<a class="sourceLine" id="cb43-3" title="3"><span class="co">## [1] 5</span></a>
<a class="sourceLine" id="cb43-4" title="4"><span class="kw">rownames</span>(tbl); <span class="kw">nrow</span>(tbl)</a>
<a class="sourceLine" id="cb43-5" title="5"><span class="co">## [1] &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;4&quot; &quot;5&quot; &quot;6&quot;</span></a>
<a class="sourceLine" id="cb43-6" title="6"><span class="co">## [1] 6</span></a></code></pre></div>
<p>Notice <code>tibble()</code> did not coerce factors by default, allowed non-syntactic names
(enclosed in ````), and let you reference new columns as they are created.</p>
<p>Both data frames and tibbles require equal length vector columns and will recycle
values if the vector length is smaller than the max column length; however, data
frames will recyle any vector that is an integer multiple of the longest column, while
tibbles will only recyle scalar values.</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb44-1" title="1"></a>
<a class="sourceLine" id="cb44-2" title="2"><span class="kw">data.frame</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">4</span>, <span class="co"># the longest column vector of length 4</span></a>
<a class="sourceLine" id="cb44-3" title="3">           <span class="dv">1</span>, <span class="co"># a scalar recyled 4 times</span></a>
<a class="sourceLine" id="cb44-4" title="4">           <span class="dv">1</span><span class="op">:</span><span class="dv">2</span> <span class="co"># a length 2 vector recyled 2 times</span></a>
<a class="sourceLine" id="cb44-5" title="5">           )</a>
<a class="sourceLine" id="cb44-6" title="6"><span class="co">##   X1.4 X1 X1.2</span></a>
<a class="sourceLine" id="cb44-7" title="7"><span class="co">## 1    1  1    1</span></a>
<a class="sourceLine" id="cb44-8" title="8"><span class="co">## 2    2  1    2</span></a>
<a class="sourceLine" id="cb44-9" title="9"><span class="co">## 3    3  1    1</span></a>
<a class="sourceLine" id="cb44-10" title="10"><span class="co">## 4    4  1    2</span></a>
<a class="sourceLine" id="cb44-11" title="11"></a>
<a class="sourceLine" id="cb44-12" title="12"><span class="kw">tibble</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">4</span>, <span class="co"># the longest column vector of length 4</span></a>
<a class="sourceLine" id="cb44-13" title="13">           <span class="dv">1</span>, <span class="co"># a scalar recyled 4 times</span></a>
<a class="sourceLine" id="cb44-14" title="14">           <span class="dv">1</span><span class="op">:</span><span class="dv">2</span> <span class="co"># a length 2 vector recyled 2 times</span></a>
<a class="sourceLine" id="cb44-15" title="15">           )</a>
<a class="sourceLine" id="cb44-16" title="16"><span class="co">## Error: Tibble columns must have consistent lengths, only values of length one are recycled:</span></a>
<a class="sourceLine" id="cb44-17" title="17"><span class="co">## * Length 2: Column `1:2`</span></a>
<a class="sourceLine" id="cb44-18" title="18"><span class="co">## * Length 4: Column `1:4`</span></a></code></pre></div>
</div>
<div id="row-names" class="section level5 unnumbered">
<h5>Row Names</h5>
<p>Row names, a unique vector of <code>character</code>, can be assigned to Data frames. This idea
probably arose due to data frame’s close association to <code>numerical</code> matrices, where
storing <code>character</code> data along with the matrix is useful. Get and set row names with <code>rownames()</code>, or argument <code>row.names</code> on creation:</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb45-1" title="1">df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">idx =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">3</span>,</a>
<a class="sourceLine" id="cb45-2" title="2">                 <span class="dt">row.names =</span> <span class="kw">c</span>(<span class="st">&#39;Spider Man&#39;</span>,<span class="st">&#39;Batman&#39;</span>,<span class="st">&#39;Red Robin&#39;</span>))</a>
<a class="sourceLine" id="cb45-3" title="3">df</a>
<a class="sourceLine" id="cb45-4" title="4"><span class="co">##            idx</span></a>
<a class="sourceLine" id="cb45-5" title="5"><span class="co">## Spider Man   1</span></a>
<a class="sourceLine" id="cb45-6" title="6"><span class="co">## Batman       2</span></a>
<a class="sourceLine" id="cb45-7" title="7"><span class="co">## Red Robin    3</span></a></code></pre></div>
<p>Row names can be used to subset data frames:</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb46-1" title="1">df[<span class="st">&quot;Batman&quot;</span>,]</a>
<a class="sourceLine" id="cb46-2" title="2"><span class="co">## [1] 2</span></a></code></pre></div>
<p>Tibbles do not store row names for reasons you can read <a href="https://adv-r.hadley.nz/vectors-chap.html#rownames">here</a>. Rather, they treat
rownames as another feature of the data. The <code>rownames</code> argument in <code>as_tibble()</code>
or <code>rownames_to_column()</code> can transform row names to a column vector.</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb47-1" title="1"><span class="kw">as_tibble</span>(df,</a>
<a class="sourceLine" id="cb47-2" title="2">          <span class="dt">rownames =</span> <span class="st">&quot;Super Hero&quot;</span>)</a>
<a class="sourceLine" id="cb47-3" title="3"><span class="co">## # A tibble: 3 x 2</span></a>
<a class="sourceLine" id="cb47-4" title="4"><span class="co">##   `Super Hero`   idx</span></a>
<a class="sourceLine" id="cb47-5" title="5"><span class="co">##   &lt;chr&gt;        &lt;int&gt;</span></a>
<a class="sourceLine" id="cb47-6" title="6"><span class="co">## 1 Spider Man       1</span></a>
<a class="sourceLine" id="cb47-7" title="7"><span class="co">## 2 Batman           2</span></a>
<a class="sourceLine" id="cb47-8" title="8"><span class="co">## 3 Red Robin        3</span></a></code></pre></div>
</div>
<div id="subsetting" class="section level5 unnumbered">
<h5>Subsetting</h5>
<p>Data frames can be subset either one dimensionaly, like a list, or two dimensionally,
like a matrix.</p>
<p>Data frame subsetting syntax can behave unexpectedly:</p>
<ol style="list-style-type: decimal">
<li><p><code>data.frame()[,vars]</code> will return a data frame unless vars selects only one column; it returns a vector.</p></li>
<li><p>selecting a single column with <code>data.frame$var</code> will return a column starting with <code>\$var</code> if <code>$var</code> doesn’t exist.</p></li>
</ol>
<p>Tibbles always return tibbles, and vectors can be returned when desired with <code>tibble[[var]]</code>. If
a column is not found it returns an error.</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb48-1" title="1"><span class="co"># data frame will select columns starting with cotton when $cotton not found</span></a>
<a class="sourceLine" id="cb48-2" title="2">df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">cotton_candy =</span> <span class="st">&#39;Yum&#39;</span>)</a>
<a class="sourceLine" id="cb48-3" title="3">df<span class="op">$</span>cotton</a>
<a class="sourceLine" id="cb48-4" title="4"><span class="co">## [1] Yum</span></a>
<a class="sourceLine" id="cb48-5" title="5"><span class="co">## Levels: Yum</span></a>
<a class="sourceLine" id="cb48-6" title="6"></a>
<a class="sourceLine" id="cb48-7" title="7"><span class="co"># tibbles do not match columns starting with cotton</span></a>
<a class="sourceLine" id="cb48-8" title="8"><span class="kw">as_tibble</span>(df)<span class="op">$</span>cotton</a>
<a class="sourceLine" id="cb48-9" title="9"><span class="co">## Warning: Unknown or uninitialised column: &#39;cotton&#39;.</span></a>
<a class="sourceLine" id="cb48-10" title="10"><span class="co">## NULL</span></a></code></pre></div>
</div>
<div id="testing-and-coercion" class="section level5 unnumbered">
<h5>Testing and coercion</h5>
<table>
<thead>
<tr class="header">
<th align="left">Type</th>
<th align="left">Testing</th>
<th align="left">Coercion</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">data frame</td>
<td align="left"><code>is.data.frame()</code></td>
<td align="left"><code>as.data.frame()</code></td>
</tr>
<tr class="even">
<td align="left">tibble</td>
<td align="left"><code>is.tibble()</code></td>
<td align="left"><code>as.tibble()</code></td>
</tr>
</tbody>
</table>
<p>Note that <code>is.data.frame()</code> will return true for tibbles as well, since tibbles
are <code>class</code> data.frame.</p>
</div>
<div id="list-columns" class="section level5 unnumbered">
<h5>List Columns</h5>

</div>
</div>
</div>
</div>
<!-- </div> -->
<div class="footnotes">
<hr />
<ol start="1">
<li id="fn1"><p>Portable Operating System Interface standard.<a href="advanced-r.html#fnref1" class="footnote-back">↩</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="programming.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="import.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
